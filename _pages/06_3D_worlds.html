
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Lab 6: 3D Worlds &#8212; Computer Graphics</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"tex": {"macros": {"vec": ["\\mathbf{#1}", 1]}}, "options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_pages/06_3D_worlds';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lab 7: Moving the Camera" href="07_Moving_the_camera.html" />
    <link rel="prev" title="Lab 5: Transformations" href="05_Transformations.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Computer Graphics - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Computer Graphics - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Contents
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Preliminaries</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="P_Core_concepts.html">Core Computer Graphics Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="P_Software.html">Visual Studio Code</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Labs</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="01_intro_to_javascript.html">Lab 1: Introduction to JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_Basic_shapes.html">Lab 2: Drawing Basic Shapes in WebGL</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_Textures.html">Lab 3: Textures</a></li>
<li class="toctree-l1"><a class="reference internal" href="04_Vectors_and_matrices.html">Lab 4: Vectors and Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_Transformations.html">Lab 5: Transformations</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Lab 6: 3D Worlds</a></li>
<li class="toctree-l1"><a class="reference internal" href="07_Moving_the_camera.html">Lab 7: Moving the Camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="08_Lighting.html">Lab 8: Lighting</a></li>
<li class="toctree-l1"><a class="reference internal" href="09_Normal_mapping.html">Lab 9: Normal Mapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="10_Quaternions.html">Lab 10: Quaternions</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="A1_Complex_numbers_and_quaternions.html">Appendix A: Complex Numbers and Quaternions</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/jonshiach/graphics-notes" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jonshiach/graphics-notes/issues/new?title=Issue%20on%20page%20%2F_pages/06_3D_worlds.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/_pages/06_3D_worlds.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Lab 6: 3D Worlds</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#d-models">3D models</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#coordinate-systems">Coordinate systems</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model-view-and-projection-matrices">Model, view and projection matrices</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-model-matrix">The Model matrix</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-view-matrix">The View matrix</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-projection-matrix">The Projection matrix</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#applying-the-model-view-and-projection-matrices">Applying the model, view and projection matrices</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-depth-test">The depth test</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#perspective-projection">Perspective projection</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#changing-the-fov-angle">Changing the fov angle</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercises">Exercises</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#video-walkthrough">Video walkthrough</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="lab-6-3d-worlds">
<span id="d-worlds-section"></span><h1>Lab 6: 3D Worlds<a class="headerlink" href="#lab-6-3d-worlds" title="Link to this heading">#</a></h1>
<p>In <a class="reference internal" href="05_Transformations.html#transformations-section"><span class="std std-ref">Lab 5: Transformations</span></a> we looked at the transformations can be applied to the vertex coordinates <span class="math notranslate nohighlight">\((x, y, z, 1)\)</span> but all of our examples were using transformations in 2D. In this lab we will take the step into the third spatial dimension and look at 3D worlds.</p>
<section id="d-models">
<h2>3D models<a class="headerlink" href="#d-models" title="Link to this heading">#</a></h2>
<p>To demonstrate building a simple 3D world we are going to need a 3D object. One of the simplest 3D objects is a <strong>unit cube</strong> which is a cube centred at (0,0,0) and has side lengths of 2 parallel to the coordinate axes (<a class="reference internal" href="#unit-cube-figure"><span class="std std-numref">Fig. 41</span></a>) so the coordinates of the 8 corners of the cube are combinations of <span class="math notranslate nohighlight">\(-1\)</span> and <span class="math notranslate nohighlight">\(1\)</span>. Since we use triangles as our basic cube consists of 12 triangles (6 square sides each constructed using out of 2 triangles).</p>
<figure class="align-default" id="unit-cube-figure">
<a class="reference internal image-reference" href="../_images/06_unit_cube.svg"><img alt="../_images/06_unit_cube.svg" src="../_images/06_unit_cube.svg" style="width: 350px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 41 </span><span class="caption-text">A unit cube centred at <span class="math notranslate nohighlight">\((0,0,0)\)</span> with side lengths of 2.</span><a class="headerlink" href="#unit-cube-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="tip admonition">
<p class="admonition-title">Task</p>
<p>Download <a class="reference download internal" download="" href="../_downloads/802dbd8ccb6ac37ff5b861a8125303ec/Lab%206%20-%203D%20Worlds.zip"><span class="xref download myst">Lab 6.zip</span></a> and extract the files to your computer.</p>
</div>
<p>Open the <em><strong>3D_worlds.js</strong></em> file, and you will see that the vertices and indices have been defined for a unit cube.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define cube vertices</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">vertices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Float32Array</span><span class="p">([</span>
<span class="w">  </span><span class="c1">// x  y  z      r  g  b     u  v                    + ------ +</span>
<span class="w">  </span><span class="c1">// front                                           /|       /|</span>
<span class="w">  </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">  </span><span class="c1">//    y        / |      / |</span>
<span class="w">   </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">  </span><span class="c1">//    |       + ------ +  |</span>
<span class="w">   </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="c1">//    +-- x   |  + ----|- +</span>
<span class="w">  </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">  </span><span class="c1">//   /        | /      | /   </span>
<span class="w">   </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="c1">//  z         |/       |/</span>
<span class="w">  </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="c1">//            + ------ +   </span>
<span class="w">  </span><span class="c1">// right                        </span>
<span class="w">   </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">   </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span>
<span class="w">   </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">   </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">   </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">   </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">  </span><span class="c1">// back</span>
<span class="w">   </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">  </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">  </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">   </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">  </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">   </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">  </span><span class="c1">// left</span>
<span class="w">  </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">  </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">  </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">  </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">  </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">  </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">  </span><span class="c1">// bottom</span>
<span class="w">  </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">   </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">   </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">  </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">   </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span>
<span class="w">  </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">  </span><span class="c1">// top</span>
<span class="w">  </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">   </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">   </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">  </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">   </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">  </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w">     </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span>
<span class="p">]);</span>

<span class="c1">// Define cube indices</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">indices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Uint16Array</span><span class="p">([</span>
<span class="w">   </span><span class="mf">0</span><span class="p">,</span><span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w">  </span><span class="mf">2</span><span class="p">,</span><span class="w">  </span><span class="mf">3</span><span class="p">,</span><span class="w">  </span><span class="mf">4</span><span class="p">,</span><span class="w">  </span><span class="mf">5</span><span class="p">,</span><span class="w">  </span><span class="c1">// front</span>
<span class="w">   </span><span class="mf">6</span><span class="p">,</span><span class="w">  </span><span class="mf">7</span><span class="p">,</span><span class="w">  </span><span class="mf">8</span><span class="p">,</span><span class="w">  </span><span class="mf">9</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w">  </span><span class="c1">// right</span>
<span class="w">  </span><span class="mf">12</span><span class="p">,</span><span class="w"> </span><span class="mf">13</span><span class="p">,</span><span class="w"> </span><span class="mf">14</span><span class="p">,</span><span class="w"> </span><span class="mf">15</span><span class="p">,</span><span class="w"> </span><span class="mf">16</span><span class="p">,</span><span class="w"> </span><span class="mf">17</span><span class="p">,</span><span class="w">  </span><span class="c1">// back</span>
<span class="w">  </span><span class="mf">18</span><span class="p">,</span><span class="w"> </span><span class="mf">19</span><span class="p">,</span><span class="w"> </span><span class="mf">20</span><span class="p">,</span><span class="w"> </span><span class="mf">21</span><span class="p">,</span><span class="w"> </span><span class="mf">22</span><span class="p">,</span><span class="w"> </span><span class="mf">23</span><span class="p">,</span><span class="w">  </span><span class="c1">// left</span>
<span class="w">  </span><span class="mf">24</span><span class="p">,</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span><span class="w"> </span><span class="mf">26</span><span class="p">,</span><span class="w"> </span><span class="mf">27</span><span class="p">,</span><span class="w"> </span><span class="mf">28</span><span class="p">,</span><span class="w"> </span><span class="mf">29</span><span class="p">,</span><span class="w">  </span><span class="c1">// bottom</span>
<span class="w">  </span><span class="mf">30</span><span class="p">,</span><span class="w"> </span><span class="mf">31</span><span class="p">,</span><span class="w"> </span><span class="mf">32</span><span class="p">,</span><span class="w"> </span><span class="mf">33</span><span class="p">,</span><span class="w"> </span><span class="mf">34</span><span class="p">,</span><span class="w"> </span><span class="mf">35</span><span class="w">   </span><span class="c1">// top</span>
<span class="p">]);</span>
</pre></div>
</div>
<p>If you compile and run this program you will see that a crate texture fills the canvas. This is because the coordinates of the cube vertices are <span class="math notranslate nohighlight">\(-1\)</span> and <span class="math notranslate nohighlight">\(1\)</span>.</p>
<figure class="align-default" id="cube-figure">
<a class="reference internal image-reference" href="../_images/06_unit_cube.png"><img alt="../_images/06_unit_cube.png" src="../_images/06_unit_cube.png" style="width: 80%;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 42 </span><span class="caption-text">The unit cube.</span><a class="headerlink" href="#cube-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<hr class="docutils" />
<section id="coordinate-systems">
<h2>Coordinate systems<a class="headerlink" href="#coordinate-systems" title="Link to this heading">#</a></h2>
<p>WebGL uses a coordinate system with the <span class="math notranslate nohighlight">\(x\)</span>-axis pointing horizontally to the right, the <span class="math notranslate nohighlight">\(y\)</span>-axis pointing vertically upwards and the <span class="math notranslate nohighlight">\(z\)</span>-axis pointing horizontally towards the viewer. To simplify things when it comes to displaying the 3D world, the axes are limited to a range from <span class="math notranslate nohighlight">\(-1\)</span> to <span class="math notranslate nohighlight">\(1\)</span>, so any object outside this range will not be shown on the display. These are known as <strong>Normalised Device Coordinates (NDC)</strong>.</p>
<figure class="align-default" id="ndc-figure">
<a class="reference internal image-reference" href="../_images/06_NDC.svg"><img alt="../_images/06_NDC.svg" src="../_images/06_NDC.svg" style="width: 500px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 43 </span><span class="caption-text">Normalised Device Coordinates (NDC)</span><a class="headerlink" href="#ndc-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>The steps used in the creation of a 3D world and eventually displaying it on screen requires that we transform through several intermediate coordinate spaces.</p>
<ul class="simple">
<li><p><strong>Model space</strong> – each individual 3D object that will appear in the 3D world is defined in its own space usually with the volume centre of the object at <span class="math notranslate nohighlight">\((0,0,0)\)</span> to make the transformations easier</p></li>
</ul>
<figure class="align-default" id="model-space-figure">
<a class="reference internal image-reference" href="../_images/06_model_space.svg"><img alt="../_images/06_model_space.svg" src="../_images/06_model_space.svg" style="width: 350px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 44 </span><span class="caption-text">The model space.</span><a class="headerlink" href="#model-space-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p><strong>World space</strong> – the 3D world is constructed by transforming the individual 3D objects using translation, rotation and scaling transformations.</p></li>
</ul>
<figure class="align-default" id="world-space-figure">
<a class="reference internal image-reference" href="../_images/06_world_space.svg"><img alt="../_images/06_world_space.svg" src="../_images/06_world_space.svg" style="width: 350px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 45 </span><span class="caption-text">The world space.</span><a class="headerlink" href="#world-space-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p><strong>View space</strong> – the world space is transformed so that it is viewed from <span class="math notranslate nohighlight">\((0,0,0)\)</span> looking down the <span class="math notranslate nohighlight">\(z\)</span>-axis.</p></li>
</ul>
<figure class="align-default" id="view-space-figure">
<a class="reference internal image-reference" href="../_images/06_view_space.svg"><img alt="../_images/06_view_space.svg" src="../_images/06_view_space.svg" style="width: 350px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 46 </span><span class="caption-text">The view space.</span><a class="headerlink" href="#view-space-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p><strong>Screen space</strong> –the 3D view space is projected onto a 2D projection plane.</p></li>
</ul>
<figure class="align-default" id="screen-space-figure">
<a class="reference internal image-reference" href="../_images/06_screen_space.svg"><img alt="../_images/06_screen_space.svg" src="../_images/06_screen_space.svg" style="width: 350px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 47 </span><span class="caption-text">The screen space.</span><a class="headerlink" href="#screen-space-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<hr class="docutils" />
<section id="model-view-and-projection-matrices">
<h2>Model, view and projection matrices<a class="headerlink" href="#model-view-and-projection-matrices" title="Link to this heading">#</a></h2>
<p>We saw in <a class="reference internal" href="05_Transformations.html#transformations-section"><span class="std std-ref">Lab 5: Transformations</span></a> that we apply a transformation by multiplying the object coordinates by a transformation matrix. Since we are transforming between difference coordinate spaces we have 3 main transformation matrices:</p>
<ul class="simple">
<li><p><strong>Model matrix</strong> - transforms the model space coordinates for the objects to the world space</p></li>
<li><p><strong>View matrix</strong> - transforms the world space coordinates to the view space coordinates</p></li>
<li><p><strong>Projection matrix</strong> - transforms the view space coordinates to the screen space NDC coordinates</p></li>
</ul>
<section id="the-model-matrix">
<span id="model-matrix-section"></span><h3>The Model matrix<a class="headerlink" href="#the-model-matrix" title="Link to this heading">#</a></h3>
<p>In <a class="reference internal" href="05_Transformations.html#transformations-section"><span class="std std-ref">Lab 5: Transformations</span></a> we saw that we can combine transformations such as translation, scaling and rotation by multiplying the individual transformation matrices together. Let’s compute a model matrix for our cube where it is scaled down by a factor of 0.5 in each coordinate direction, rotated about the <span class="math notranslate nohighlight">\(y\)</span>-axis and translated backwards down the <span class="math notranslate nohighlight">\(z\)</span>-axis so that its centre is at <span class="math notranslate nohighlight">\((0, 0, -2)\)</span>.</p>
<div class="tip admonition">
<p class="admonition-title">Task</p>
<p>Edit the <code class="docutils literal notranslate"><span class="pre">render()</span></code> function in the <em><strong>3D_worlds.js</strong></em> file so that the calculation of the model matrix looks like the following</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Calculate the model matrix</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">rotationsPerSecond</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="o">/</span><span class="mf">3</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">rotationsPerSecond</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">time</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.001</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Mat4</span><span class="p">()</span>
<span class="w">  </span><span class="p">.</span><span class="nx">translate</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">2</span><span class="p">])</span>
<span class="w">  </span><span class="p">.</span><span class="nx">rotate</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">],</span><span class="w"> </span><span class="nx">angle</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">scale</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">]);</span>
</pre></div>
</div>
</div>
<p>Here we have calculated the individual transformation matrices for translation, scaling and rotation and multiply them together to create the model matrix. The rotation angle has been calculated using the time of the current frame so that the cube will perform one full rotation every 3 seconds.</p>
</section>
<section id="the-view-matrix">
<span id="view-matrix-section"></span><h3>The View matrix<a class="headerlink" href="#the-view-matrix" title="Link to this heading">#</a></h3>
<p>To view the world space we create a virtual camera and place it in the world space. We need to translate the whole of the world space so that the camera is at <span class="math notranslate nohighlight">\((0,0,0)\)</span> and then rotate the world space so that the camera is pointing down the <span class="math notranslate nohighlight">\(z\)</span>-axis (<a class="reference internal" href="#view-space-figure"><span class="std std-numref">Fig. 46</span></a>). To do this we require three vectors (<a class="reference internal" href="#camera-vectors-figure"><span class="std std-numref">Fig. 48</span></a>):</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\vec{eye}\)</span>: the coordinates of the camera position,</p></li>
<li><p><span class="math notranslate nohighlight">\(\vec{target}\)</span>: the coordinates of the target point that the camera is pointing,</p></li>
<li><p><span class="math notranslate nohighlight">\(\vec{worldUp}\)</span>: a vector pointing straight up in the world space which allows us to orientate the camera, this is usually <span class="math notranslate nohighlight">\((0, 1, 0)\)</span></p></li>
</ul>
<figure class="align-default" id="camera-vectors-figure">
<a class="reference internal image-reference" href="../_images/06_view_space_alignment.svg"><img alt="../_images/06_view_space_alignment.svg" src="../_images/06_view_space_alignment.svg" style="width: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 48 </span><span class="caption-text">The vectors used in the transformation to the view space.</span><a class="headerlink" href="#camera-vectors-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>The eye and target vectors are either determined by the user through keyboard, mouse or controller inputs or through some predetermined routine. To determine the view space transformation we first translate the camera position by negative of the eye vector so that it is at <span class="math notranslate nohighlight">\((0, 0, 0)\)</span> using the following translation matrix</p>
<div class="math notranslate nohighlight">
\[\begin{split} \begin{align*}
    Translate =
    \begin{pmatrix}
        1 &amp; 0 &amp; 0 &amp; -\vec{eye}_x \\
        0 &amp; 1 &amp; 0 &amp; -\vec{eye}_y \\
        0 &amp; 0 &amp; 1 &amp; -\vec{eye}_z \\
        0 &amp; 0 &amp; 0 &amp; 1
    \end{pmatrix}
\end{align*}, \end{split}\]</div>
<p>The next step is to align the world space so that the direction vector is pointing down the <span class="math notranslate nohighlight">\(z\)</span>-axis. To do this we calculate three camera vectors (<a class="reference internal" href="#camera-vectors-figure"><span class="std std-numref">Fig. 48</span></a>):</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\vec{front}\)</span> vector which extends outwards in front of the camera towards the target,</p></li>
<li><p><span class="math notranslate nohighlight">\(\vec{right}\)</span> vector which extends outwards to the right of the camera,</p></li>
<li><p><span class="math notranslate nohighlight">\(\vec{up}\)</span> vector which extends straight up from the camera.</p></li>
</ul>
<p>These three vectors are all unit vectors (have a length of 1) and are at right-angles to each other. The front vector is calculated using</p>
<div class="math notranslate nohighlight" id="equation-eq-front-camera-vector">
<span class="eqno">(15)<a class="headerlink" href="#equation-eq-front-camera-vector" title="Link to this equation">#</a></span>\[ \vec{front} = \operatorname{normalize}(\vec{target} - \vec{eye}).\]</div>
<p>The right vector points is at right-angles to both the front and world up vectors. We can use the <a class="reference internal" href="04_Vectors_and_matrices.html#cross-product-section"><span class="std std-ref">cross product</span></a> between the two vectors to calculate this (note that the order of the vectors is important).</p>
<div class="math notranslate nohighlight" id="equation-eq-right-camera-vector">
<span class="eqno">(16)<a class="headerlink" href="#equation-eq-right-camera-vector" title="Link to this equation">#</a></span>\[ \vec{right} = \operatorname{normalize}( \vec{front} \times \vec{world Up}).\]</div>
<p>The up vector points is at right-angles to the front and right vectors, so this can be calculated using another cross product</p>
<div class="math notranslate nohighlight" id="equation-eq-up-camera-vector">
<span class="eqno">(17)<a class="headerlink" href="#equation-eq-up-camera-vector" title="Link to this equation">#</a></span>\[ \vec{up} = \operatorname{normalize}(\vec{right} \times \vec{front}).\]</div>
<p>Once these vectors have been calculated the transformation matrix to rotate the camera so that it is looking down the <span class="math notranslate nohighlight">\(z\)</span>-axis is</p>
<div class="math notranslate nohighlight">
\[\begin{split} Rotate = \begin{pmatrix}
     \vec{right}_x &amp;  \vec{right}_y &amp;  \vec{right}_z &amp; 0 \\
     \vec{up}_x    &amp;  \vec{up}_y    &amp;  \vec{up}_z    &amp; 0 \\
    -\vec{front}_x &amp; -\vec{front}_y &amp; -\vec{front}_z &amp; 0 \\
    0 &amp; 0 &amp; 0 &amp; 1
\end{pmatrix}.\end{split}\]</div>
<p>The translation matrix and rotation matrix are multiplied together to form the view matrix which transforms the world space coordinates to the view space.</p>
<div class="math notranslate nohighlight">
\[\begin{split} \begin{align*}
    View &amp;= Rotate \times Translate \\
    &amp;=
    \begin{pmatrix}
         \vec{right}_x &amp;  \vec{right}_y &amp;  \vec{right}_z &amp; 0 \\
         \vec{up}_x    &amp;  \vec{up}_y    &amp;  \vec{up}_z    &amp; 0 \\
        -\vec{front}_x &amp; -\vec{front}_y &amp; -\vec{front}_z &amp; 0 \\
        0 &amp; 0 &amp; 0 &amp; 1
    \end{pmatrix}
    \begin{pmatrix}
        1 &amp; 0 &amp; 0 &amp; -\vec{eye}_x \\
        0 &amp; 1 &amp; 0 &amp; -\vec{eye}_y \\
        0 &amp; 0 &amp; 1 &amp; -\vec{eye}_z \\
        0 &amp; 0 &amp; 0 &amp; 1
    \end{pmatrix} \\
    &amp;=
    \begin{pmatrix}
        \vec{right}_x  &amp; \vec{right}_y  &amp; \vec{right}_z  &amp; -\vec{eye} \cdot \vec{right} \\
        \vec{up}_x     &amp; \vec{up}_y     &amp; \vec{up}_z     &amp; -\vec{eye} \cdot \vec{up} \\
        -\vec{front}_x &amp; -\vec{front}_y &amp; -\vec{front}_z &amp;  \vec{eye} \cdot \vec{front} \\
        0 &amp; 0 &amp; 0 &amp; 1
    \end{pmatrix}
\end{align*} \end{split}\]</div>
<p>So the transposed view matrix is</p>
<div class="math notranslate nohighlight" id="equation-eq-view-matrix">
<span class="eqno">(18)<a class="headerlink" href="#equation-eq-view-matrix" title="Link to this equation">#</a></span>\[\begin{split} View = \begin{pmatrix}
    \vec{right}_x &amp; \vec{up}_x &amp; -\vec{front}_x &amp; 0 \\
    \vec{right}_y &amp; \vec{up}_y &amp; -\vec{front}_y &amp; 0 \\
    \vec{right}_z &amp; \vec{up}_z &amp; -\vec{front}_z &amp; 0 \\
    -\vec{eye} \cdot \vec{right} &amp;
    -\vec{eye} \cdot \vec{up} &amp;
     \vec{eye} \cdot \vec{front} &amp;
     1
\end{pmatrix} \end{split}\]</div>
<div class="tip admonition">
<p class="admonition-title">Task</p>
<p>Create a file called <em><strong>camera.js</strong></em> inside which enter the following code</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="nx">Camera</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// Camera vectors</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">eye</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">];</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">worldUp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">];</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">front</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">];</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">right</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">];</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">up</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">];</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="nx">update</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">normalize</span><span class="p">(</span><span class="nx">cross</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">front</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">worldUp</span><span class="p">));</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">up</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="nx">normalize</span><span class="p">(</span><span class="nx">cross</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">right</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">front</span><span class="p">));</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="nx">getViewMatrix</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Mat4</span><span class="p">().</span><span class="nx">set</span><span class="p">([</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">right</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">up</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span><span class="w"> </span><span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">front</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">right</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">up</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span><span class="w"> </span><span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">front</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">right</span><span class="p">[</span><span class="mf">2</span><span class="p">],</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">up</span><span class="p">[</span><span class="mf">2</span><span class="p">],</span><span class="w"> </span><span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">front</span><span class="p">[</span><span class="mf">2</span><span class="p">],</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">      </span><span class="o">-</span><span class="nx">dot</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">eye</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">right</span><span class="p">),</span>
<span class="w">      </span><span class="o">-</span><span class="nx">dot</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">eye</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">up</span><span class="p">),</span>
<span class="w">       </span><span class="nx">dot</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">eye</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">front</span><span class="p">),</span>
<span class="w">      </span><span class="mf">1</span>
<span class="w">    </span><span class="p">]);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And add the following to the <em><strong>index.html</strong></em> file before the <em><strong>3D_worlds.js</strong></em> file is embedded</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;camera.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<p>Here we have create a Camera class that will be used to compute anything that is related to the camera. The constructor function defines 5 camera class vectors such that the camera is positioned at <span class="math notranslate nohighlight">\(\vec{eye} = (0,0,0)\)</span>, looking in the direction of  <span class="math notranslate nohighlight">\(\vec{front} = (0, 0, -1)\)</span> (i.e., down the <span class="math notranslate nohighlight">\(z\)</span>-axis). We also defined the method <code class="docutils literal notranslate"><span class="pre">lookAt()</span></code> which calculates returns the view matrix using equation <a class="reference internal" href="#equation-eq-view-matrix">(18)</a>.</p>
<div class="tip admonition">
<p class="admonition-title">Task</p>
<p>Enter the following code before the <code class="docutils literal notranslate"><span class="pre">render()</span></code> function in the <em><strong>3D_worlds.js</strong></em> file.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Create camera object</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">camera</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Camera</span><span class="p">();</span>
</pre></div>
</div>
<p>And add the following to the <code class="docutils literal notranslate"><span class="pre">render()</span></code> function before we calculate the model matrix.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Update camera vectors</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">2</span><span class="p">];</span>
<span class="nx">camera</span><span class="p">.</span><span class="nx">eye</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
<span class="nx">camera</span><span class="p">.</span><span class="nx">front</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">normalize</span><span class="p">(</span><span class="nx">subtractVector</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="w"> </span><span class="nx">camera</span><span class="p">.</span><span class="nx">eye</span><span class="p">));</span>
<span class="nx">camera</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>

<span class="c1">// Calculate view matrix</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">view</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">camera</span><span class="p">.</span><span class="nx">getViewMatrix</span><span class="p">();</span>
</pre></div>
</div>
</div>
<p>Here we create a camera object, set the <span class="math notranslate nohighlight">\(\vec{eye}\)</span> and <span class="math notranslate nohighlight">\(\vec{front}\)</span> camera vectors so that the camera is positioned at <span class="math notranslate nohighlight">\((1,1,1)\)</span> and looking towards the centre of the translated cube at <span class="math notranslate nohighlight">\((0, 0, -2)\)</span> (using equation <a class="reference internal" href="#equation-eq-front-camera-vector">(15)</a>) and then calculate the view matrix using the <code class="docutils literal notranslate"><span class="pre">lookAt()</span></code> method.</p>
</section>
<hr class="docutils" />
<section id="the-projection-matrix">
<h3>The Projection matrix<a class="headerlink" href="#the-projection-matrix" title="Link to this heading">#</a></h3>
<p>The next step is to project the view space onto the screen space. The simplest type of projection is <strong>orthographic projection</strong> where the coordinates in the view space are transformed to the screen space by simple translation and scaling transformations.</p>
<p>The region of the view space that will form the screen space is defined by a cuboid bounded by a left, right, bottom, top, near and far clipping planes. Any objects outside the cuboid are clipped (<a class="reference internal" href="#orthographic-projection-figure"><span class="std std-numref">Fig. 49</span></a>).</p>
<figure class="align-default" id="orthographic-projection-figure">
<a class="reference internal image-reference" href="../_images/06_orthographic_projection.svg"><img alt="../_images/06_orthographic_projection.svg" src="../_images/06_orthographic_projection.svg" style="width: 700px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 49 </span><span class="caption-text">Orthographic projection.</span><a class="headerlink" href="#orthographic-projection-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>The transpose of the orthographic projection matrix is calculated using</p>
<div class="math notranslate nohighlight" id="equation-eq-orthographic-projection-matrix">
<span class="eqno">(19)<a class="headerlink" href="#equation-eq-orthographic-projection-matrix" title="Link to this equation">#</a></span>\[\begin{split} \begin{align*}
    Orthographic =
    \begin{pmatrix}
        \dfrac{2}{right - left} &amp; 0 &amp; 0 &amp; 0 \\
        0 &amp; \dfrac{2}{top - bottom} &amp; 0 &amp; 0 \\
        0 &amp; 0 &amp; -\dfrac{2}{far - near} &amp; 0 \\
        -\dfrac{right + left}{right - left} &amp; -\dfrac{top + bottom}{top - bottom} &amp; -\dfrac{far + near}{far - near} &amp; 1
    \end{pmatrix}
\end{align*}, \end{split}\]</div>
<p>where <span class="math notranslate nohighlight">\(left\)</span>, <span class="math notranslate nohighlight">\(right\)</span>, <span class="math notranslate nohighlight">\(bottom\)</span>, <span class="math notranslate nohighlight">\(top\)</span>, <span class="math notranslate nohighlight">\(near\)</span> and <span class="math notranslate nohighlight">\(far\)</span> are the coordinates of the edges of the visible space. You don’t really need to know how this matrix is derived but if you are interested click on the dropdown link below.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Derivation of the orthographic projection matrix</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">To derive the orthographic projection we first need to translate the coordinates so that the centre of the cuboid that represents the clipping volume to <span class="math notranslate nohighlight">\((0,0,0)\)</span>. The centre coordinates are calculated using the average of the edge coordinates, e.g., for the <span class="math notranslate nohighlight">\(x\)</span> coordinate this would be <span class="math notranslate nohighlight">\(\dfrac{right + left}{2}\)</span>, so the translation matrix is</p>
<div class="math notranslate nohighlight">
\[\begin{split} \begin{align*}
    Translate =
    \begin{pmatrix}
        1 &amp; 0 &amp; 0 &amp; -\dfrac{right + left}{2}  \\
        0 &amp; 1 &amp; 0 &amp; -\dfrac{top + bottom}{2} \\
        0 &amp; 0 &amp; 1 &amp; -\dfrac{far - near}{2}  \\
        0 &amp; 0 &amp; 0 &amp; 1
    \end{pmatrix}
\end{align*} \end{split}\]</div>
<p class="sd-card-text">The second step is to scale the clipping volume so that the coordinates are between <span class="math notranslate nohighlight">\(-1\)</span> and <span class="math notranslate nohighlight">\(1\)</span>. This is done by dividing the distance between the edges of the screen space by the distance between the clipping planes, e.g., for the <span class="math notranslate nohighlight">\(x\)</span> coordinate this would be <span class="math notranslate nohighlight">\(\dfrac{1 - (-1)}{right - left}=\dfrac{2}{right - left}\)</span>, so the scaling matrix is</p>
<div class="math notranslate nohighlight">
\[\begin{split} \begin{align*}
    Scale =
    \begin{pmatrix}
        \dfrac{2}{right - left} &amp; 0 &amp; 0 &amp; 0 \\
        0 &amp; \dfrac{2}{top - bottom} &amp; 0 &amp; 0 \\
        0 &amp; 0 &amp; -\dfrac{2}{far - near} &amp; 0 \\
        0 &amp; 0 &amp; 0 &amp; 1
    \end{pmatrix}.
\end{align*} \end{split}\]</div>
<p class="sd-card-text">Combining the translation and scaling matrices gives the orthographic projection matrix</p>
<div class="math notranslate nohighlight">
\[\begin{split} \begin{align*}
    Orthographic &amp;= Translate \times Scale \\
    &amp;=
    \begin{pmatrix}
        \dfrac{2}{right - left} &amp; 0 &amp; 0 &amp; -\dfrac{right + left}{right - left} \\
        0 &amp; \dfrac{2}{top - bottom} &amp; 0 &amp; -\dfrac{top + bottom}{top - bottom} \\
        0 &amp; 0 &amp; -\dfrac{2}{far - near}  &amp; -\dfrac{far + near}{far - near} \\
        0 &amp; 0 &amp; 0 &amp; 1
    \end{pmatrix}
\end{align*} \end{split}\]</div>
<p class="sd-card-text">This matrix is transposed when coding in JavaScript.</p>
</div>
</details><div class="tip admonition">
<p class="admonition-title">Task</p>
<p>Add the following method definition to the Camera class</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">getOrthographicMatrix</span><span class="p">(</span><span class="nx">left</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="p">,</span><span class="w"> </span><span class="nx">bottom</span><span class="p">,</span><span class="w"> </span><span class="nx">top</span><span class="p">,</span><span class="w"> </span><span class="nx">near</span><span class="p">,</span><span class="w"> </span><span class="nx">far</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">rl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="nx">right</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">left</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="nx">top</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">bottom</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="nx">far</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">near</span><span class="p">);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Mat4</span><span class="p">().</span><span class="nx">set</span><span class="p">([</span>
<span class="w">    </span><span class="mf">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">rl</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">tb</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">fn</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="o">-</span><span class="p">(</span><span class="nx">right</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">left</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">rl</span><span class="p">,</span>
<span class="w">    </span><span class="o">-</span><span class="p">(</span><span class="nx">top</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">bottom</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">tb</span><span class="p">,</span>
<span class="w">    </span><span class="o">-</span><span class="p">(</span><span class="nx">far</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">near</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">fn</span><span class="p">,</span>
<span class="w">    </span><span class="mf">1</span>
<span class="w">  </span><span class="p">]);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And add the following to the <code class="docutils literal notranslate"><span class="pre">render()</span></code> function file after we have calculated the view matrix</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Calculate projection matrix</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">projection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">camera</span><span class="p">.</span><span class="nx">getOrthographicMatrix</span><span class="p">(</span><span class="o">-</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">100</span><span class="p">);</span>
</pre></div>
</div>
</div>
<p>Here we have defined the method <code class="docutils literal notranslate"><span class="pre">orthographic()</span></code> that returns the orthographic projection matrix from equation <a class="reference internal" href="#equation-eq-orthographic-projection-matrix">(19)</a> and used it to calculate the projection matrix.</p>
</section>
<hr class="docutils" />
<section id="applying-the-model-view-and-projection-matrices">
<h3>Applying the model, view and projection matrices<a class="headerlink" href="#applying-the-model-view-and-projection-matrices" title="Link to this heading">#</a></h3>
<p>Transforming the object coordinates from the model space to the view space to the screen space is achieved using</p>
<div class="math notranslate nohighlight">
\[\textsf{screen space coordinates} = Projection \cdot View \cdot Model \cdot \textsf{object coordinates}\]</div>
<p>Recall that the transformations are applied to the object coordinates in the vertex shader. We have already sent the model matrix to the shader, so we need to do the same for the view and projection matrices.</p>
<div class="tip admonition">
<p class="admonition-title">Task</p>
<p>Add the following code after we have calculated the view and projection matrices.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Send view and project matrices to the shaders</span>
<span class="nx">gl</span><span class="p">.</span><span class="nx">uniformMatrix4fv</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;uView&quot;</span><span class="p">),</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="nx">view</span><span class="p">.</span><span class="nx">m</span><span class="p">);</span>
<span class="nx">gl</span><span class="p">.</span><span class="nx">uniformMatrix4fv</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;uProjection&quot;</span><span class="p">),</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="nx">projection</span><span class="p">.</span><span class="nx">m</span><span class="p">);</span>
</pre></div>
</div>
</div>
<p>We now need to update the vertex shader to use these.</p>
<div class="highlight-glsl notranslate"><div class="highlight"><pre><span></span><span class="cp">#version 300 es</span>
<span class="k">precision</span><span class="w"> </span><span class="k">mediump</span><span class="w"> </span><span class="kt">float</span><span class="p">;</span>

<span class="k">in</span><span class="w"> </span><span class="kt">vec3</span><span class="w"> </span><span class="n">aPosition</span><span class="p">;</span>
<span class="k">in</span><span class="w"> </span><span class="kt">vec3</span><span class="w"> </span><span class="n">aColour</span><span class="p">;</span>
<span class="k">in</span><span class="w"> </span><span class="kt">vec2</span><span class="w"> </span><span class="n">aTexCoords</span><span class="p">;</span>

<span class="k">out</span><span class="w"> </span><span class="kt">vec3</span><span class="w"> </span><span class="n">vColour</span><span class="p">;</span>
<span class="k">out</span><span class="w"> </span><span class="kt">vec2</span><span class="w"> </span><span class="n">vTexCoords</span><span class="p">;</span>

<span class="k">uniform</span><span class="w"> </span><span class="kt">mat4</span><span class="w"> </span><span class="n">uModel</span><span class="p">;</span>
<span class="k">uniform</span><span class="w"> </span><span class="kt">mat4</span><span class="w"> </span><span class="n">uView</span><span class="p">;</span>
<span class="k">uniform</span><span class="w"> </span><span class="kt">mat4</span><span class="w"> </span><span class="n">uProjection</span><span class="p">;</span>

<span class="kt">void</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nb">gl_Position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uProjection</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">uView</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">uModel</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kt">vec4</span><span class="p">(</span><span class="n">aPosition</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Output vertex colour</span>
<span class="w">  </span><span class="n">vColour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aColour</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// Output texture coordinates</span>
<span class="w">  </span><span class="n">vTexCoords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aTexCoords</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="tip admonition">
<p class="admonition-title">Task</p>
<p>Edit the vertex shader code at the top of the <em><strong>3D_worlds.js</strong></em> file so that it looks like the vertex shader shown above.</p>
</div>
<p>Here we have added the two uniforms for the view and projection matrices to the vertex shader and then used these, along with the model matrix to transform the object coordinates to the screen space. Refresh your web browser and you should the rotating cube below.</p>
<center>
<video autoplay controls muted="true" loop="true" width="60%">
    <source src="../_static/videos/06_orthogonal_cube_no_depth_test.mp4" type="video/mp4">
</video>
</center>
</section>
</section>
<hr class="docutils" />
<section id="the-depth-test">
<h2>The depth test<a class="headerlink" href="#the-depth-test" title="Link to this heading">#</a></h2>
<p>Our rendering of the cube doesn’t look quite right. What is happening here is that some parts of the sides of the cube that are further away from where we are viewing it (e.g., the bottom side) have been rendered after the sides that are closer to us (<a class="reference internal" href="#depth-test-1-figure"><span class="std std-numref">Fig. 50</span></a>).</p>
<figure class="align-default" id="depth-test-1-figure">
<a class="reference internal image-reference" href="../_images/06_depth_test.svg"><img alt="../_images/06_depth_test.svg" src="../_images/06_depth_test.svg" style="width: 300px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 50 </span><span class="caption-text">Fragments further away rendered after closer fragments.</span><a class="headerlink" href="#depth-test-1-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>To overcome this issue WebGL uses a <strong>depth test</strong> when computing the fragment shader. When WebGL creates a frame buffer it also creates another buffer called a <strong>z buffer</strong> (or <strong>depth buffer</strong>) where the <span class="math notranslate nohighlight">\(z\)</span> coordinate of each pixel in the frame buffer is stored and initialises all the values to <span class="math notranslate nohighlight">\(-1\)</span> (the furthest possible <span class="math notranslate nohighlight">\(z\)</span> coordinate in the screen space). When the fragment shader is called it checks whether the fragment has a <span class="math notranslate nohighlight">\(z\)</span> coordinate more than that already stored in the depth buffer and if so it updates the colour of the fragment and stores its <span class="math notranslate nohighlight">\(z\)</span> coordinate in the depth-buffer as the current nearest fragment (if the fragment has a <span class="math notranslate nohighlight">\(z\)</span> coordinate less than what is already in the depth buffer the fragment shader does nothing). This means once the fragment shader has been called for all fragments of all objects, the pixels contain colours of the objects closest to the camera.</p>
<div class="tip admonition">
<p class="admonition-title">Task</p>
<p>Add the following to the <code class="docutils literal notranslate"><span class="pre">initWebGL()</span></code> function in the <em><strong>webGLUtils.js</strong></em> file.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">gl</span><span class="p">.</span><span class="nx">enable</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">DEPTH_TEST</span><span class="p">);</span>
</pre></div>
</div>
<p>And change command to clear the frame buffers in the <code class="docutils literal notranslate"><span class="pre">render()</span></code> function to the following</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Clear frame buffers</span>
<span class="nx">gl</span><span class="p">.</span><span class="nx">clear</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">COLOR_BUFFER_BIT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">gl</span><span class="p">.</span><span class="nx">DEPTH_BUFFER_BIT</span><span class="p">);</span>
</pre></div>
</div>
</div>
<p>Here we first enabled WebGL’s depth test and then we clear the depth buffer at the start of the rendering of each frame. Refresh your web browser and you should get a much better result.</p>
<center>
<video autoplay controls muted="true" loop="true" width="500">
    <source src="../_static/videos/06_orthogonal_cube_depth_test.mp4" type="video/mp4">
</video>
</center>
</section>
<hr class="docutils" />
<section id="perspective-projection">
<h2>Perspective projection<a class="headerlink" href="#perspective-projection" title="Link to this heading">#</a></h2>
<p>The problem with using orthographic projection is that is does not give us any clues to how far an object is from the viewer. We would expect that objects further away from the camera would appear smaller whereas objects closer to the camera would appear larger. To demonstrate this we are going to add another cube to our scene which is placed futher away from the camera.</p>
<div class="tip admonition">
<p class="admonition-title">Task</p>
<p>Add the following code after the cube indices are defined</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define cube positions</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">cubes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nx">position</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">2</span><span class="p">]</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nx">position</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">6</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
<span class="p">];</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">numCubes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">cubes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
</pre></div>
</div>
<p>Now edit the code used to calculate the model matrix and draw the cubes so that it looks like the following</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Draw cubes</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">numCubes</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="c1">// Calculate the model matrix</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Mat4</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="nx">translate</span><span class="p">(</span><span class="nx">cubes</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">position</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">rotate</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">],</span><span class="w"> </span><span class="nx">angle</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">scale</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">]);</span>

<span class="w">  </span><span class="c1">// Send model matrix to the shader</span>
<span class="w">  </span><span class="nx">gl</span><span class="p">.</span><span class="nx">uniformMatrix4fv</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;uModel&quot;</span><span class="p">),</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="nx">model</span><span class="p">.</span><span class="nx">m</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Draw the triangles</span>
<span class="w">  </span><span class="nx">gl</span><span class="p">.</span><span class="nx">bindVertexArray</span><span class="p">(</span><span class="nx">vao</span><span class="p">);</span>
<span class="w">  </span><span class="nx">gl</span><span class="p">.</span><span class="nx">drawElements</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TRIANGLES</span><span class="p">,</span><span class="w"> </span><span class="nx">indices</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="w"> </span><span class="nx">gl</span><span class="p">.</span><span class="nx">UNSIGNED_SHORT</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>Here we first define an array of JavaScript objects where the position attribute are 3-element arrays containing the centre coordinates of the two cubes. We then loop through the two cubes, calculate the model matrix for each one and draw the cube. Note that have stopped the cubes from rotating by setting the rotation angle to zero. Refresh your web browser and you should see something like the following.</p>
<figure class="align-default" id="orthographic-cubes-figure">
<a class="reference internal image-reference" href="../_images/06_orthographic_cubes.png"><img alt="../_images/06_orthographic_cubes.png" src="../_images/06_orthographic_cubes.png" style="width: 80%;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 51 </span><span class="caption-text">Orthographic projection.</span><a class="headerlink" href="#orthographic-cubes-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>The cube in the front is centred at <span class="math notranslate nohighlight">\((0, 0, -2)\)</span> and the cube behind is centred at <span class="math notranslate nohighlight">\((0, 0, -6)\)</span>. Using orthographic projection both cubes appear the same size despite one being further away from the camera which is located at <span class="math notranslate nohighlight">\((1, 1, 1)\)</span>.</p>
<p>Perspective projection is used to render objects where the further an object is from the camera, the small it appears in the canvas. It use the same near and far clipping planes as orthographic projection but the clipping planes on the sides are not parallel, rather they angle in such that the four planes meet at <span class="math notranslate nohighlight">\((0,0,0)\)</span> (<a class="reference internal" href="#perspective-projection-figure"><span class="std std-numref">Fig. 52</span></a>). The clipping volume bounded by the size clipping planes is called the <strong>viewing frustum</strong>.</p>
<figure class="align-default" id="perspective-projection-figure">
<a class="reference internal image-reference" href="../_images/06_perspective_projection.svg"><img alt="../_images/06_perspective_projection.svg" src="../_images/06_perspective_projection.svg" style="width: 700px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 52 </span><span class="caption-text">Perspective projection.</span><a class="headerlink" href="#perspective-projection-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>The shape of the viewing frustum is determined by four factors:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(near\)</span> – the distance from <span class="math notranslate nohighlight">\((0,0,0)\)</span> to the near clipping plane</p></li>
<li><p><span class="math notranslate nohighlight">\(far\)</span> – the distance from <span class="math notranslate nohighlight">\((0,0,0)\)</span> to the far clipping plane</p></li>
<li><p><span class="math notranslate nohighlight">\(fov\)</span> – the field of view angle between the bottom and top clipping planes (used to determine how much of the view space is visible)</p></li>
<li><p><span class="math notranslate nohighlight">\(aspect\)</span> – the width-to-height aspect ratio of the window</p></li>
</ul>
<p>Given these four factors we can calculate the transpose of the perspective projection matrix using</p>
<div class="math notranslate nohighlight" id="equation-eq-perspective-matrix">
<span class="eqno">(20)<a class="headerlink" href="#equation-eq-perspective-matrix" title="Link to this equation">#</a></span>\[\begin{split} \begin{align*}
    Perspective =
    \begin{pmatrix}
        \dfrac{near}{right} &amp; 0 &amp; 0 &amp; 0 \\
        0 &amp; \dfrac{near}{top} &amp; 0 &amp; 0 \\
        0 &amp; 0 &amp; -\dfrac{near + far}{far - near} &amp; -1 \\
        0 &amp; 0 &amp; - \dfrac{2\times far \times near}{far - near} &amp; 0
    \end{pmatrix},
\end{align*} \end{split}\]</div>
<p>where <span class="math notranslate nohighlight">\(top = near \times \tan\left(\dfrac{fov}{2}\right)\)</span> and <span class="math notranslate nohighlight">\(right = aspect \times top\)</span>. You don’t really need to know how this is derived but if you are interested click on the dropdown below.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Derivation of the perspective projection matrix</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">The mapping of a point in the view space with coordinates <span class="math notranslate nohighlight">\((x, y, z)\)</span> onto the near clipping plane to the point <span class="math notranslate nohighlight">\((x', y', -near)\)</span> is shown in <a class="reference internal" href="#perspective-mapping-figure"><span class="std std-numref">Fig. 53</span></a>.</p>
<figure class="align-default" id="perspective-mapping-figure">
<a class="reference internal image-reference" href="../_images/06_perspective_projection_mapping.svg"><img alt="../_images/06_perspective_projection_mapping.svg" src="../_images/06_perspective_projection_mapping.svg" style="width: 500px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 53 </span><span class="caption-text">Mapping of the point at <span class="math notranslate nohighlight">\((x,y,z)\)</span> onto the near plane using perspective.</span><a class="headerlink" href="#perspective-mapping-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p class="sd-card-text">The ratio of <span class="math notranslate nohighlight">\(x\)</span> to <span class="math notranslate nohighlight">\(-z\)</span> distance is the same as the ratio of <span class="math notranslate nohighlight">\(x'\)</span> to <span class="math notranslate nohighlight">\(near\)</span> distance (and similar for <span class="math notranslate nohighlight">\(y'\)</span>) so</p>
<div class="math notranslate nohighlight">
\[\begin{split} \begin{align*}
    \dfrac{x}{-z} &amp;= \dfrac{x'}{near} &amp;\implies
    x' &amp;= -near \frac{x}{z}, \\
    \dfrac{y}{-z} &amp;= \dfrac{y'}{near} &amp;\implies
    y' &amp;= -near \frac{y}{z},
\end{align*} \end{split}\]</div>
<p class="sd-card-text">So we are mapping <span class="math notranslate nohighlight">\((x, y)\)</span> to <span class="math notranslate nohighlight">\(\left( -near \dfrac{x}{z}, -near \dfrac{y}{z} \right)\)</span>. As well as the perspective mapping we also need to ensure that the mapped coordinates <span class="math notranslate nohighlight">\((x', y', z')\)</span> are between <span class="math notranslate nohighlight">\(-1\)</span> and <span class="math notranslate nohighlight">\(1\)</span>. Consider the mapping of the <span class="math notranslate nohighlight">\(x\)</span> coordinate</p>
<div class="math notranslate nohighlight">
\[\begin{split} \begin{align*}
    left &amp;\leq x' \leq right \\
    -right &amp;\leq x' \leq right  &amp;&amp; \textsf{(since $left = -right$)} \\
    -1 &amp;\leq \frac{x'}{right} \leq 1 &amp;&amp; \textsf{(divide by $right$)}
\end{align*} \end{split}\]</div>
<p class="sd-card-text">Since <span class="math notranslate nohighlight">\(x' = -near\dfrac{x}{z}\)</span> then</p>
<div class="math notranslate nohighlight">
\[ \begin{align*}
    -1 &amp;\leq -\frac{near}{right}\frac{x}{z}\leq 1
\end{align*} \]</div>
<p class="sd-card-text">and doing similar for <span class="math notranslate nohighlight">\(y\)</span> we get</p>
<div class="math notranslate nohighlight">
\[ \begin{align*}
    -1 &amp;\leq -\frac{near}{top}\frac{y}{z}\leq 1
\end{align*} \]</div>
<p class="sd-card-text">If we use <a class="reference internal" href="05_Transformations.html#homogeneous-coordinates-section"><span class="std std-ref">homogeneous coordinates</span></a> then this mapping can be represented by the matrix equation</p>
<div class="math notranslate nohighlight">
\[\begin{split} \begin{align*}
    \begin{pmatrix}
        \dfrac{near}{right} &amp; 0 &amp; 0 &amp; 0 \\
        0 &amp; \dfrac{near}{top} &amp; 0 &amp; 0 \\
        0 &amp; 0 &amp; A &amp; B \\
        0 &amp; 0 &amp; -1 &amp; 0
    \end{pmatrix}
    \begin{pmatrix} x \\ y \\ z \\ 1 \end{pmatrix}
    =
    \begin{pmatrix} \dfrac{near}{right}x \\ \dfrac{near}{top}y \\ Az + B \\ -z \end{pmatrix}
\end{align*} \end{split}\]</div>
<p class="sd-card-text">where <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(B\)</span> are placeholder variables for now. Since we divide homogeneous coordinates by the fourth element then the projected coordinates are</p>
<div class="math notranslate nohighlight">
\[\begin{split} \begin{align*}
    \begin{pmatrix} x' \\ y' \\ z' \\ 1 \end{pmatrix} =
    \begin{pmatrix}
        -\dfrac{near}{right}\dfrac{x}{z} \\
        -\dfrac{near}{top}\dfrac{y}{z} \\
        \dfrac{Az + B}{-z} \\
        1
    \end{pmatrix}.
\end{align*} \end{split}\]</div>
<p class="sd-card-text">So the mapping for <span class="math notranslate nohighlight">\(x'\)</span> and <span class="math notranslate nohighlight">\(y'\)</span> is correct. We need <span class="math notranslate nohighlight">\(z'\)</span> to be between <span class="math notranslate nohighlight">\(-1\)</span> and <span class="math notranslate nohighlight">\(1\)</span> so <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(B\)</span> must satisfy</p>
<div class="math notranslate nohighlight">
\[\begin{split} \begin{align*}
    \textsf{near plane:} &amp;&amp;\frac{Az + B}{-z} &amp;= -1, &amp; \implies  Az + B &amp;= z, \\
    \textsf{far plane:} &amp;&amp; \frac{Az + B}{-z} &amp;= 1, &amp; \implies Az + B &amp;= -z.
\end{align*} \end{split}\]</div>
<p class="sd-card-text">At the near clipping plane <span class="math notranslate nohighlight">\(z = -near\)</span> and at the far clipping plane <span class="math notranslate nohighlight">\(z = -far\)</span> so</p>
<div class="math notranslate nohighlight">
\[\begin{split} \begin{align*}
    -A \times near + B &amp;= -near, \\
    -A \times far + B &amp;= far.
\end{align*} \end{split}\]</div>
<p class="sd-card-text">Subtracting the first equation from the second gives</p>
<div class="math notranslate nohighlight">
\[\begin{split} \begin{align*}
    -A (far - near) &amp;= far + near \\
    \therefore A &amp;= -\frac{far + near}{far - near}.
\end{align*} \end{split}\]</div>
<p class="sd-card-text">Substituting <span class="math notranslate nohighlight">\(A\)</span> in the second equation gives</p>
<div class="math notranslate nohighlight">
\[\begin{split} \begin{align*}
    \left(\frac{far + near}{far - near}\right) near + B &amp;= -near \\
    B &amp;= -near \left( 1 +  \frac{far + near}{far - near}\right) \\
    &amp;= -near \left( \frac{far - near + far + near}{far - near}\right) \\
    &amp;= - \frac{2 \times far \times near}{far - near}.
\end{align*} \end{split}\]</div>
<p class="sd-card-text">So the perspective projection matrix is</p>
<div class="math notranslate nohighlight">
\[\begin{split} \begin{align*}
    Perspective =
    \begin{pmatrix}
        \dfrac{near}{right} &amp; 0 &amp; 0 &amp; 0 \\
        0 &amp; \dfrac{near}{top} &amp; 0 &amp; 0 \\
        0 &amp; 0 &amp; -\dfrac{far + near}{far - near} &amp; - \dfrac{2\times far \times near}{far - near} \\
        0 &amp; 0 &amp; -1 &amp; 0
    \end{pmatrix}.
\end{align*} \end{split}\]</div>
<p class="sd-card-text">We now need to calculate the values of <span class="math notranslate nohighlight">\(r\)</span> and <span class="math notranslate nohighlight">\(t\)</span>. The <span class="math notranslate nohighlight">\(t\)</span> coordinate is the opposite side of a right-angled triangle with angle <span class="math notranslate nohighlight">\(\dfrac{fov}{2}\)</span> and adjacent side <span class="math notranslate nohighlight">\(n\)</span>, so it is easily calculated using trigonometry</p>
<div class="math notranslate nohighlight">
\[\begin{split} \begin{align*}
    \tan \left( \frac{fov}{2} \right)
    &amp;= \frac{top}{near} \\
    t &amp;= near \tan \left( \frac{fov}{2} \right).
\end{align*} \end{split}\]</div>
<p class="sd-card-text">Since <span class="math notranslate nohighlight">\(aspect\)</span> with the width of the window divided by the height and <span class="math notranslate nohighlight">\(l = -r\)</span> and <span class="math notranslate nohighlight">\(b = -t\)</span> then</p>
<div class="math notranslate nohighlight">
\[\begin{split} \begin{align*}
    aspect &amp;= \frac{right - left}{top - bottom} = \frac{2 \times right}{2 \times top} \\
    \therefore right &amp;= aspect \times top.
\end{align*} \end{split}\]</div>
</div>
</details><div class="tip admonition">
<p class="admonition-title">Task</p>
<p>Add the following properties to the Camera class constructor</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Projection settings</span>
<span class="k">this</span><span class="p">.</span><span class="nx">fov</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="mf">45</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">180</span><span class="p">;</span>
<span class="k">this</span><span class="p">.</span><span class="nx">aspect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">800</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">600</span><span class="p">;</span>
<span class="k">this</span><span class="p">.</span><span class="nx">near</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="p">;</span>
<span class="k">this</span><span class="p">.</span><span class="nx">far</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="mf">1000</span><span class="p">;</span>
</pre></div>
</div>
<p>And add the following method definition to the Camera class</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">getPerspectiveMatrix</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">t</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">near</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">tan</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">fov</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">r</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">aspect</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">t</span><span class="p">;</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">far</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">near</span><span class="p">);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Mat4</span><span class="p">().</span><span class="nx">set</span><span class="p">([</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">near</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">r</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">near</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">t</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">far</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">near</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">fn</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span>
<span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">far</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">near</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">fn</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span>
<span class="w">  </span><span class="p">]);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Comment out the command used to calculate the projection matrix in the <code class="docutils literal notranslate"><span class="pre">render()</span></code> function and add the following.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">projection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">camera</span><span class="p">.</span><span class="nx">getPerspectiveMatrix</span><span class="p">();</span>
</pre></div>
</div>
</div>
<p>Refresh your web browser and you should see something similar to the following.</p>
<figure class="align-default" id="perspective-cubes-figure">
<a class="reference internal image-reference" href="../_images/06_perspective_cubes.png"><img alt="../_images/06_perspective_cubes.png" src="../_images/06_perspective_cubes.png" style="width: 80%;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 54 </span><span class="caption-text">Perspective projection.</span><a class="headerlink" href="#perspective-cubes-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<section id="changing-the-fov-angle">
<span id="changing-the-fov-section"></span><h3>Changing the fov angle<a class="headerlink" href="#changing-the-fov-angle" title="Link to this heading">#</a></h3>
<p>The field of view angle determines how much of the view space we can see in the screen space where the larger the angle the more we can see. When we increase the field of view angle it appears to the user that our view is zooming out whereas a decrease has the effect of zooming in (this is used a lot in first-person shooter games to model the effect of a pair of binoculars or a sniper scope).</p>
<p>Experiment with the affect of changing the field of view angle.</p>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 docutils">
<div class="sd-row docutils">
<div class="sd-col sd-d-flex-column docutils">
<figure class="align-default" id="id1">
<img alt="../_images/06_fov_15.png" src="../_images/06_fov_15.png" />
<figcaption>
<p><span class="caption-number">Fig. 55 </span><span class="caption-text"><span class="math notranslate nohighlight">\(fov = 15^\circ\)</span></span><a class="headerlink" href="#id1" title="Link to this image">#</a></p>
</figcaption>
</figure>
</div>
<div class="sd-col sd-d-flex-column docutils">
<figure class="align-default" id="id2">
<img alt="../_images/06_fov_120.png" src="../_images/06_fov_120.png" />
<figcaption>
<p><span class="caption-number">Fig. 56 </span><span class="caption-text"><span class="math notranslate nohighlight">\(fov = 120^\circ\)</span></span><a class="headerlink" href="#id2" title="Link to this image">#</a></p>
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Create a <span class="math notranslate nohighlight">\(5 \times 5\)</span> grid of cubes where the centres of the cubes are 3 units apart.</p></li>
</ol>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/06_Ex1.png"><img alt="../_images/06_Ex1.png" src="../_images/06_Ex1.png" style="width: 60%;" />
</a>
</figure>
<ol class="arabic simple" start="2">
<li><p>Move the camera to that its position moves in a circular orbit around the centre cube at a height of 3 units off the ground. The camera should complete one full rotation every 10 seconds whilst also looking at the centre cube.</p></li>
</ol>
<center>
<video autoplay controls muted="true" loop="true" width="60%">
    <source src="../_static/videos/06_Ex2.mp4" type="video/mp4">
</video>
</center>
<ol class="arabic simple" start="3">
<li><p>Rotate every other cube about a random vector so that they complete one full rotation every 2 seconds.</p></li>
</ol>
<center>
<video autoplay controls muted="true" loop="true" width="60%">
    <source src="../_static/videos/06_Ex3.mp4" type="video/mp4">
</video>
</center>
</section>
<hr class="docutils" />
<section id="video-walkthrough">
<h2>Video walkthrough<a class="headerlink" href="#video-walkthrough" title="Link to this heading">#</a></h2>
<iframe
  width="560"
  height="315"
  src="https://www.youtube.com/embed/5rUYed7RTss?si=lvJIqcUgqzTSSgBZ"
  title="YouTube video player"
  frameborder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
  referrerpolicy="strict-origin-when-cross-origin"
  allowfullscreen
></iframe>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./_pages"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="05_Transformations.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Lab 5: Transformations</p>
      </div>
    </a>
    <a class="right-next"
       href="07_Moving_the_camera.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Lab 7: Moving the Camera</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#d-models">3D models</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#coordinate-systems">Coordinate systems</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model-view-and-projection-matrices">Model, view and projection matrices</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-model-matrix">The Model matrix</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-view-matrix">The View matrix</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-projection-matrix">The Projection matrix</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#applying-the-model-view-and-projection-matrices">Applying the model, view and projection matrices</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-depth-test">The depth test</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#perspective-projection">Perspective projection</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#changing-the-fov-angle">Changing the fov angle</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercises">Exercises</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#video-walkthrough">Video walkthrough</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Dr Jon Shiach
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2026.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>