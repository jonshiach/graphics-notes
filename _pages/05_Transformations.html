
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Lab 5: Transformations &#8212; Computer Graphics</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"tex": {"macros": {"vec": ["\\mathbf{#1}", 1]}}, "options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_pages/05_Transformations';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lab 6: 3D Worlds" href="06_3D_worlds.html" />
    <link rel="prev" title="Lab 4: Vectors and Matrices" href="04_Vectors_and_matrices.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.svg" class="logo__image only-light" alt="Computer Graphics - Home"/>
    <script>document.write(`<img src="../_static/logo.svg" class="logo__image only-dark" alt="Computer Graphics - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Computer Graphics
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Preliminaries</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="P_Core_concepts.html">Core Computer Graphics Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="P_Software.html">Software</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Labs</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="02_Basic_shapes.html">Lab 2: Drawing Basic Shapes in WebGL</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_Textures.html">Lab 3: Textures</a></li>
<li class="toctree-l1"><a class="reference internal" href="04_Vectors_and_matrices.html">Lab 4: Vectors and Matrices</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Lab 5: Transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="06_3D_worlds.html">Lab 6: 3D Worlds</a></li>
<li class="toctree-l1"><a class="reference internal" href="07_Moving_the_camera.html">Lab 7: Moving the Camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="08_Lighting.html">Lab 8: Lighting</a></li>
<li class="toctree-l1"><a class="reference internal" href="09_Normal_mapping.html">Lab 9: Normal Mapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="10_Quaternions.html">Lab 20: Quaternions</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="A1_Complex_numbers_and_quaternions.html">Appendix A: Complex Numbers and Quaternions</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/jonshiach/graphics-notes" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jonshiach/graphics-notes/issues/new?title=Issue%20on%20page%20%2F_pages/05_Transformations.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/_pages/05_Transformations.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Lab 5: Transformations</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#webgl-coordinate-system">WebGL coordinate system</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#translation">Translation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scaling">Scaling</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rotation">Rotation</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#axis-angle-rotation">Axis-angle rotation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#composite-transformations">Composite transformations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#animation">Animation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercises">Exercises</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="lab-5-transformations">
<span id="transformations-section"></span><h1>Lab 5: Transformations<a class="headerlink" href="#lab-5-transformations" title="Link to this heading">#</a></h1>
<p>Computer graphics requires that shapes are manipulated in space by moving the shapes, shrinking or stretching, rotating and reflection to name a few. We call these manipulations <strong>transformations</strong>. We need a convenient way of telling the computer how to apply our transformations and for this we make use of matrices which we covered in <a class="reference internal" href="04_Vectors_and_matrices.html#vectors-and-matrices-section"><span class="std std-ref">Lab 4: Vectors and Matrices</span></a>.</p>
<p>Each transformation has an associated <strong>transformation matrix</strong> which we use to multiply the vertex coordinates of a shape to calculate the vertex coordinates of the transformed shape. For example if <span class="math notranslate nohighlight">\(A\)</span> is a transformation matrix for a particular transformation and <span class="math notranslate nohighlight">\((x,y,z)\)</span> are the coordinates of a vertex then we apply the transformation using</p>
<div class="math notranslate nohighlight">
\[\begin{split} \begin{pmatrix} x' \\ y' \\ x' \end{pmatrix} = A \cdot \begin{pmatrix} x \\ y \\ z \end{pmatrix}, \end{split}\]</div>
<p>where <span class="math notranslate nohighlight">\((x',y',z')\)</span> are the coordinates of the transformed point. Note that all vectors and coordinates are written as a column vector when multiplying by a matrix.</p>
<div class="tip admonition">
<p class="admonition-title">Task</p>
<p>Create a folder called <em><strong>Lab 5 Transformations</strong></em> and copy across the files from your <em><strong>Lab 3 Textures</strong></em> folder. Rename <em><strong>textures.js</strong></em> to <em><strong>transformations.js</strong></em>, change the title of the web page to ‘Lab 04 - Transformations’ and add a script for the <em><strong>maths.js</strong></em> file.</p>
</div>
<p>Load <em><strong>index.html</strong></em> using a live server and you should see the textured rectangle from <a class="reference internal" href="03_Textures.html#textures-section"><span class="std std-ref">Lab 4 - Textures</span></a>.</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/04_transformations.png"><img alt="../_images/04_transformations.png" src="../_images/04_transformations.png" style="width: 80%;" />
</a>
</figure>
<hr class="docutils" />
<section id="webgl-coordinate-system">
<h2>WebGL coordinate system<a class="headerlink" href="#webgl-coordinate-system" title="Link to this heading">#</a></h2>
<p>In 3D graphics a coordinate system defines how points, directions and rotations are represented. The two main conventions are the <strong>right-handed</strong> and <strong>left-handed</strong> coordinates systems. Both use <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span> and <span class="math notranslate nohighlight">\(z\)</span> axes but they differ in which direction the <span class="math notranslate nohighlight">\(z\)</span>-axis points relative to the <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(y\)</span> axis.</p>
<p>The right-handed coordinate system is where on your right hand:</p>
<ul class="simple">
<li><p>the thumb points along the positive <span class="math notranslate nohighlight">\(x\)</span>-axis,</p></li>
<li><p>the index finger points along the positive <span class="math notranslate nohighlight">\(y\)</span>-axis,</p></li>
<li><p>the middle finger points along the positive <span class="math notranslate nohighlight">\(z\)</span>-axis.</p></li>
</ul>
<p>The other way of representing 3D space is to use a left-hand coordinate system which is the same but on your left hand.</p>
<p><strong>WebGL uses the right-handed coordinate system</strong> where the <span class="math notranslate nohighlight">\(x\)</span>-axis points to the right of the screen, the <span class="math notranslate nohighlight">\(y\)</span>-axis points towards the top of the screen and the <span class="math notranslate nohighlight">\(z\)</span>-axis points out of the screen towards you (<a class="reference internal" href="#webgl-co-ordinate-figure"><span class="std std-numref">Fig. 27</span></a>).</p>
<figure class="align-default" id="webgl-co-ordinate-figure">
<a class="reference internal image-reference" href="../_images/04_webgl_axes.svg"><img alt="../_images/04_webgl_axes.svg" src="../_images/04_webgl_axes.svg" style="width: 300px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 27 </span><span class="caption-text">The WebGL co-ordinate system.</span><a class="headerlink" href="#webgl-co-ordinate-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Other graphics libraries that use the right-handed coordinate system include OpenGL, Three.js, Vulkan, Metal (Apple) and applications such as Unreal Engine and Blender. Graphics libraies that use the left-handed coordinate system include DirectX, Direct3D and Unity.</p>
<hr class="docutils" />
</section>
<section id="translation">
<span id="translation-section"></span><h2>Translation<a class="headerlink" href="#translation" title="Link to this heading">#</a></h2>
<p>The <strong>translation</strong> transformation when applied to a set of points moves each point by the same amount. For example, consider the triangle in <a class="reference internal" href="#translation-figure"><span class="std std-numref">Fig. 28</span></a>, each of the vertices has been translated by the same vector <span class="math notranslate nohighlight">\(\vec{t}\)</span> which has that effect of moving the triangle.</p>
<figure class="align-default" id="translation-figure">
<a class="reference internal image-reference" href="../_images/04_translation.svg"><img alt="../_images/04_translation.svg" src="../_images/04_translation.svg" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 28 </span><span class="caption-text">Translation of a triangle by the translation vector <span class="math notranslate nohighlight">\(\vec{t}= (t_x, t_y, t_z)\)</span>.</span><a class="headerlink" href="#translation-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>A problem we have is that no transformation matrix exists for applying translation to the coordinates <span class="math notranslate nohighlight">\((x, y, z)\)</span>, i.e., we can’t find a matrix <span class="math notranslate nohighlight">\(Translate\)</span> such that</p>
<div class="math notranslate nohighlight">
\[\begin{split}Translate \cdot \begin{pmatrix} x  \\ y \\ z \end{pmatrix} = \begin{pmatrix} x + t_x \\ y + t_y \\ z + t_z \end{pmatrix}.\end{split}\]</div>
<p id="homogeneous-coordinates-section">We can use a trick where we use <a href="https://en.wikipedia.org/wiki/Homogeneous_coordinates" target="_blank"><strong>homogeneous coordinates</strong></a>. Homogeneous coordinates add another value, <span class="math notranslate nohighlight">\(w\)</span> say, to the <span class="math notranslate nohighlight">\((x, y, z)\)</span> coordinates (known as Cartesian coordinates) such that when the <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span> and <span class="math notranslate nohighlight">\(z\)</span> values are divided by <span class="math notranslate nohighlight">\(w\)</span> we get the Cartesian coordinates.</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\underset{\textsf{homogeneous}}{\begin{pmatrix} x \\ y \\ z \\ w \end{pmatrix}} \equiv \underset{\textsf{Cartesian}}{\begin{pmatrix} x/w \\ y/w \\ z/w \end{pmatrix}}.\end{split}\]</div>
<p>So if we choose <span class="math notranslate nohighlight">\(w=1\)</span> then we can write the Cartesian coordinates <span class="math notranslate nohighlight">\((x, y, z)\)</span> as the homogeneous coordinates <span class="math notranslate nohighlight">\((x, y, z, 1)\)</span> (remember that 4-element vector with the additional 1 in our <a class="reference internal" href="#vertex-shader-section"><span class="xref myst">vertex shader</span></a>?). So how does that help us with our elusive translation matrix? Well we can now represent translation as a <span class="math notranslate nohighlight">\(4 \times 4\)</span> matrix</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{pmatrix}
    1 &amp; 0 &amp; 0 &amp; t_x \\
    0 &amp; 1 &amp; 0 &amp; t_y \\
    0 &amp; 0 &amp; 1 &amp; t_z \\
    0 &amp; 0 &amp; 0 &amp; 1
\end{pmatrix}
\begin{pmatrix} x \\ y \\ z \\ 1 \end{pmatrix}
=
\begin{pmatrix} x + t_x \\ y + t_y \\ z + t_z \\ 1 \end{pmatrix},\end{split}\]</div>
<p>which is our desired translation. So the <strong>translation matrix</strong> for translating a set of points by the vector <span class="math notranslate nohighlight">\(\vec{t} = (t_x, t_y, t_z)\)</span> is</p>
<div class="math notranslate nohighlight">
\[\begin{split}Translate = \begin{pmatrix}
    1 &amp; 0 &amp; 0 &amp; t_x \\
    0 &amp; 1 &amp; 0 &amp; t_y \\
    0 &amp; 0 &amp; 1 &amp; t_z \\
    0 &amp; 0 &amp; 0 &amp; 1
\end{pmatrix}.\end{split}\]</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Recall that WebGL and glm use <a class="reference internal" href="04_Vectors_and_matrices.html#column-major-order-section"><span class="std std-ref">column-major order</span></a>, so when coding transformation matrices into JavaScript we need to code the transpose of the matrix. So the translation matrix we are going to use is</p>
<div class="math notranslate nohighlight" id="translation-matrix">
<span id="equation-translation-matrix"></span><span class="eqno">(9)<a class="headerlink" href="#translation-matrix" title="Link to this equation">#</a></span>\[\begin{split}Translate = \begin{pmatrix}
    1 &amp; 0 &amp; 0 &amp; 0 \\
    0 &amp; 1 &amp; 0 &amp; 0 \\
    0 &amp; 0 &amp; 1 &amp; 0 \\
    t_x &amp; t_y &amp; t_z &amp; 1
\end{pmatrix}\end{split}\]</div>
</div>
<p>Let’s translate the rectangle <span class="math notranslate nohighlight">\(0.4\)</span> to the right and <span class="math notranslate nohighlight">\(0.3\)</span> upwards (remember we are dealing with normalised device coordinates, so the window coordinates are between <span class="math notranslate nohighlight">\(-1\)</span> and <span class="math notranslate nohighlight">\(1\)</span>). The transposed transformation matrix to perform this translation is</p>
<div class="math notranslate nohighlight">
\[\begin{split}
Translate = \begin{pmatrix}
    1 &amp; 0 &amp; 0 &amp; 0 \\
    0 &amp; 1 &amp; 0 &amp; 0 \\
    0 &amp; 0 &amp; 1 &amp; 0 \\
    0.4 &amp; 0.3 &amp; 0 &amp; 1
\end{pmatrix}.\end{split}\]</div>
<p>We are going to define matrix class to compute the various transformation matrices.</p>
<div class="tip admonition">
<p class="admonition-title">Task</p>
<p>Add the following function definition to the matrix class in the <em><strong>maths.js</strong></em> file.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Transformation matrices</span>
<span class="nx">translate</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">,</span><span class="w"> </span><span class="nx">z</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Mat4</span><span class="p">().</span><span class="nx">set</span><span class="p">(</span>
<span class="w">    </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">,</span><span class="w"> </span><span class="nx">z</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And add the following to the <em><strong>translations.js</strong></em> file before we draw the rectangle.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Calculate transformation matrices</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">translate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Mat4</span><span class="p">().</span><span class="nx">translate</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">);</span>
</pre></div>
</div>
</div>
<p>Here we have defined the function <code class="docutils literal notranslate"><span class="pre">translate()</span></code> that results the translation matrix for a given translation vector and have called this function to compute <code class="docutils literal notranslate"><span class="pre">translateMatrix</span></code>.</p>
<p>The multiplication of the vertex coordinates by the transformation matrices is done in the GPU as opposed to the CPU. This is because GPUs are specifically designed to perform matrix multiplication on millions of vertices in parallel, so doing this in the GPU is much faster and frees up the CPU. So we send the transformation matrix to the vertex shader using a  <strong>uniform</strong>, like we did in the lab on <a class="reference internal" href="#uniforms-section"><span class="xref myst">texture maps</span></a>.</p>
<div class="tip admonition">
<p class="admonition-title">Task</p>
<p>Add the following code after we have calculated the translation matrix.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Send transformation matrices to the shader</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">translate</span><span class="p">;</span>
<span class="nx">gl</span><span class="p">.</span><span class="nx">uniformMatrix4fv</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;uModel&quot;</span><span class="p">),</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="nx">model</span><span class="p">.</span><span class="nx">m</span><span class="p">);</span>
</pre></div>
</div>
</div>
<p>Here we have created another matrix called <code class="docutils literal notranslate"><span class="pre">model</span></code> and have sent this to the shader using the uniform name <code class="docutils literal notranslate"><span class="pre">uModel</span></code> (it is standard practice to call the matrix that applies transformations to an object as the “model” matrix). We will be applying multiple transformations to our object vertices. Rather then sending multiple matrices to the shaders, we multiply them in the CPU and send a single <span class="math notranslate nohighlight">\(4 \times 4\)</span> matrix to the shaders. The <strong>model matrix</strong> is the combination of transformations that are applied to each vertex of the object.</p>
<p>We now have to do is modify the vertex shader to use our new transformation matrix.</p>
<div class="tip admonition">
<p class="admonition-title">Task</p>
<p>In the vertex shader definition at the top of the <strong>transformations.js</strong> file, add the following uniform declaration before the <code class="docutils literal notranslate"><span class="pre">main()</span></code> function.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">uniform</span><span class="w"> </span><span class="nx">mat4</span><span class="w"> </span><span class="nx">uModel</span><span class="p">;</span>
</pre></div>
</div>
<p>And change the calculation of <code class="docutils literal notranslate"><span class="pre">gl_Position</span></code> to the following</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">gl_Position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">uModel</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">vec4</span><span class="p">(</span><span class="nx">aPosition</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span>
</pre></div>
</div>
</div>
<p>Refresh your web browser and you should see that our rectangle has been translated to the right and up a bit as shown in <a class="reference internal" href="#translate-rectangle-figure"><span class="std std-numref">Fig. 29</span></a>.</p>
<figure class="align-default" id="translate-rectangle-figure">
<a class="reference internal image-reference" href="../_images/04_translation.png"><img alt="../_images/04_translation.png" src="../_images/04_translation.png" style="width: 80%;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 29 </span><span class="caption-text">The rectangle is translated by the vector <span class="math notranslate nohighlight">\((0.4, 0.3, 0)\)</span>.</span><a class="headerlink" href="#translate-rectangle-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<hr class="docutils" />
<section id="scaling">
<h2>Scaling<a class="headerlink" href="#scaling" title="Link to this heading">#</a></h2>
<p>Scaling is one of the simplest transformation we can apply. Multiplying the <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span> and <span class="math notranslate nohighlight">\(z\)</span> coordinates of a point by a scalar quantity (a number) has the effect of moving the point closer or further away from the origin (0,0). For example, consider the triangle in <a class="reference internal" href="#scaling-about-origin-figure"><span class="std std-numref">Fig. 30</span></a>. The <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span> and <span class="math notranslate nohighlight">\(z\)</span> coordinates of each vertex has been multiplied by <span class="math notranslate nohighlight">\(s_x\)</span>, <span class="math notranslate nohighlight">\(s_y\)</span> and <span class="math notranslate nohighlight">\(s_y\)</span> respectively which has the effect of scaling the triangle and moving the vertices further away from the origin (in this case because <span class="math notranslate nohighlight">\(s_x\)</span>, <span class="math notranslate nohighlight">\(s_y\)</span> and <span class="math notranslate nohighlight">\(s_z\)</span> are all greater than 1).</p>
<figure class="align-default" id="scaling-about-origin-figure">
<a class="reference internal image-reference" href="../_images/04_scaling.svg"><img alt="../_images/04_scaling.svg" src="../_images/04_scaling.svg" style="height: 350px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 30 </span><span class="caption-text">Scaling a triangle centred at the origin.</span><a class="headerlink" href="#scaling-about-origin-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Since scaling is simply multiplying the coordinates by a number we have</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
    \begin{pmatrix}
        s_x &amp; 0 &amp; 0 &amp; 0 \\
        0 &amp; s_y &amp; 0 &amp; 0 \\
        0 &amp; 0 &amp; s_z &amp; 0 \\
        0 &amp; 0 &amp; 0 &amp; 1
    \end{pmatrix}
    \begin{pmatrix} x \\ y \\ z \\ 1 \end{pmatrix}
    =
    \begin{pmatrix} s_xx \\ s_yy \\ s_zz \\ 1 \end{pmatrix},
\end{align*}\end{split}\]</div>
<p>so the <strong>scaling matrix</strong> for applying the scaling transformation is</p>
<div class="math notranslate nohighlight" id="equation-eq-scaling-matrix">
<span class="eqno">(10)<a class="headerlink" href="#equation-eq-scaling-matrix" title="Link to this equation">#</a></span>\[\begin{split} Scale =
\begin{pmatrix}
    s_x &amp; 0 &amp; 0 &amp; 0 \\
    0 &amp; s_y &amp; 0 &amp; 0 \\
    0 &amp; 0 &amp; s_z &amp; 0 \\
    0 &amp; 0 &amp; 0 &amp; 1
\end{pmatrix}. \end{split}\]</div>
<p>Let’s now apply scaling to our rectangle in WebGL to increase its size by a factor of 0.5 in the horizontal direction and 0.4 in the vertical direction. The scaling matrix that achieves this is</p>
<div class="math notranslate nohighlight">
\[\begin{split}Scale = \begin{pmatrix}
    0.5 &amp; 0 &amp; 0 &amp; 0 \\
    0 &amp; 0.4 &amp; 0 &amp; 0 \\
    0 &amp; 0 &amp; 1 &amp; 0 \\
    0 &amp; 0 &amp; 0 &amp; 1
\end{pmatrix}.\end{split}\]</div>
<p>We have already created a model matrix and the uniform in the vertex shader, so we just need to calculate the scaling matrix and use it instead of the translation matrix.</p>
<div class="tip admonition">
<p class="admonition-title">Task</p>
<p>Enter the following function definition to the matrix class.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">scale</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">,</span><span class="w"> </span><span class="nx">z</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Mat4</span><span class="p">().</span><span class="nx">set</span><span class="p">(</span>
<span class="w">    </span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">z</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Enter the following code to the <em><strong>tranformations.js</strong></em> file after we calcuate the translation matrix.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">scale</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Mat4</span><span class="p">().</span><span class="nx">scale</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
</pre></div>
</div>
<p>And change the model matrix to the following.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">scale</span><span class="p">;</span>
</pre></div>
</div>
</div>
<p>Refresh your web browser and you should see that our rectangle has been scaled down as shown in <a class="reference internal" href="#scaling-rectangle-figure"><span class="std std-numref">Fig. 31</span></a>.</p>
<figure class="align-default" id="scaling-rectangle-figure">
<a class="reference internal image-reference" href="../_images/04_scaling.png"><img alt="../_images/04_scaling.png" src="../_images/04_scaling.png" style="width: 80%;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 31 </span><span class="caption-text">The rectangle is scaled by the vector <span class="math notranslate nohighlight">\((0.5, 0.4, 1)\)</span>.</span><a class="headerlink" href="#scaling-rectangle-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If scaling is applied to a shape that is not centred at <span class="math notranslate nohighlight">\((0,0,0)\)</span> then the transformed shape is distorted and its centre is moved from its original position (<a class="reference internal" href="#scaling-not-centred-figure"><span class="std std-numref">Fig. 32</span></a>).</p>
<figure class="align-default" id="scaling-not-centred-figure">
<a class="reference internal image-reference" href="../_images/04_scaling_not_centred.svg"><img alt="../_images/04_scaling_not_centred.svg" src="../_images/04_scaling_not_centred.svg" style="width: 550px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 32 </span><span class="caption-text">Scaling applied to a triangle not centred at <span class="math notranslate nohighlight">\((0,0,0)\)</span>.</span><a class="headerlink" href="#scaling-not-centred-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>If the desired result is to resize the shape whilst keeping its dimensions and location the same we first need to translate the vertex coordinates by <span class="math notranslate nohighlight">\(-\vec{c}\)</span> where <span class="math notranslate nohighlight">\(\vec{c}\)</span> is the centre of volume for the shape so that it is at <span class="math notranslate nohighlight">\((0,0,0)\)</span>. Then we can apply the scaling before translating by <span class="math notranslate nohighlight">\(\vec{c}\)</span> so that the centre of volume is back at the original position (<a class="reference internal" href="#scaling-about-centre-figure"><span class="std std-numref">Fig. 33</span></a>).</p>
<figure class="align-default" id="scaling-about-centre-figure">
<a class="reference internal image-reference" href="../_images/04_scaling_about_centre.svg"><img alt="../_images/04_scaling_about_centre.svg" src="../_images/04_scaling_about_centre.svg" style="width: 700px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 33 </span><span class="caption-text">The steps required to scale a shape about its centre.</span><a class="headerlink" href="#scaling-about-centre-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
</div>
<hr class="docutils" />
</section>
<section id="rotation">
<span id="rotation-section"></span><h2>Rotation<a class="headerlink" href="#rotation" title="Link to this heading">#</a></h2>
<p>As well as translating and scaling objects, the next most common transformation is the rotation of objects around the three co-ordinate axes <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span> and <span class="math notranslate nohighlight">\(z\)</span>. We define the rotation <strong>anti-clockwise</strong> around each of the co-ordinate axes by an angle <span class="math notranslate nohighlight">\(\theta\)</span> when looking down the axes (<a class="reference internal" href="#d-rotation-figure"><span class="std std-numref">Fig. 34</span></a>).</p>
<figure class="align-default" id="d-rotation-figure">
<a class="reference internal image-reference" href="../_images/04_3D_rotation.svg"><img alt="../_images/04_3D_rotation.svg" src="../_images/04_3D_rotation.svg" style="height: 450px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 34 </span><span class="caption-text">Rotation is assumed to be in the anti-clockwise direction when looking down the axis.</span><a class="headerlink" href="#d-rotation-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>The rotation matrices for achieving these rotations are</p>
<div class="math notranslate nohighlight">
\[\begin{split} \begin{align*}
    R_x &amp;=
    \begin{pmatrix}
        1 &amp; 0 &amp; 0 &amp; 0 \\
        0 &amp; \cos(\theta) &amp; -\sin(\theta) &amp; 0 \\
        0 &amp; \sin(\theta) &amp;  \cos(\theta) &amp; 0 \\
        0 &amp; 0 &amp; 0 &amp; 1
    \end{pmatrix}, \\
    R_y &amp;=
    \begin{pmatrix}
         \cos(\theta) &amp; 0 &amp; \sin(\theta) &amp; 0 \\
        0 &amp; 1 &amp; 0 &amp; 0 \\
        -\sin(\theta) &amp; 0 &amp; \cos(\theta) &amp; 0 \\
        0 &amp; 0 &amp; 0 &amp; 1
    \end{pmatrix}, \\
    R_z &amp;=
    \begin{pmatrix}
        \cos(\theta) &amp; -\sin(\theta) &amp; 0 &amp; 0 \\
        \sin(\theta) &amp;  \cos(\theta) &amp; 0 &amp; 0 \\
        0 &amp; 0 &amp; 1 &amp; 0 \\
        0 &amp; 0 &amp; 0 &amp; 1
    \end{pmatrix}.
\end{align*} \end{split}\]</div>
<p>You don’t really need to know how these are derived but if you are curious you can click on the dropdown link below.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Derivation of the rotation matrices (click to show)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">We will consider rotation about the <span class="math notranslate nohighlight">\(z\)</span>-axis and will restrict our coordinates to 2D.</p>
<figure class="align-default" id="rotation-figure">
<a class="reference internal image-reference" href="../_images/04_rotation.svg"><img alt="../_images/04_rotation.svg" src="../_images/04_rotation.svg" style="height: 300px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 35 </span><span class="caption-text">Rotating the vector <span class="math notranslate nohighlight">\(\vec{a}\)</span> anti-clockwise by angle <span class="math notranslate nohighlight">\(\theta\)</span> to the vector <span class="math notranslate nohighlight">\(\vec{b}\)</span>.</span><a class="headerlink" href="#rotation-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p class="sd-card-text">Consider <a class="reference internal" href="#rotation-figure"><span class="std std-numref">Fig. 35</span></a> where the vector <span class="math notranslate nohighlight">\(\vec{a}\)</span> is rotated by angle <span class="math notranslate nohighlight">\(\theta\)</span> to the vector <span class="math notranslate nohighlight">\(\vec{b}\)</span>. If we form a right-angled triangle (the blue one) then we know the length of the hypotenuse, <span class="math notranslate nohighlight">\(\|\vec{a}\|\)</span>, and the angle <span class="math notranslate nohighlight">\(\theta\)</span>, so we can calculate the lengths of the adjacent and opposite sides using trigonometry. Remember our trig ratios (SOH-CAH-TOA)</p>
<div class="math notranslate nohighlight">
\[\begin{align*}
    \sin(\phi) &amp;= \frac{opposite}{hypotenuse}, &amp;
    \cos(\phi) &amp;= \frac{adjacent}{hypotenuse}, &amp;
    \tan(\phi) &amp;= \frac{opposite}{adjacent},
\end{align*}\]</div>
<p class="sd-card-text">so the length of the adjacent and opposite sides of the blue triangle is</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
    adjacent &amp;= hypotenuse \cdot \cos(\phi), \\
    opposite &amp;= hypotenuse \cdot \sin(\phi).
\end{align*}\end{split}\]</div>
<p class="sd-card-text">Since <span class="math notranslate nohighlight">\(a_x\)</span> and <span class="math notranslate nohighlight">\(a_y\)</span> are the lengths of the adjacent and opposite sides respectively and <span class="math notranslate nohighlight">\(\|\vec{a}\|\)</span> is the length of the hypotenuse we have</p>
<div class="math notranslate nohighlight" id="equation-rotation-derivation-a">
<span class="eqno">(11)<a class="headerlink" href="#equation-rotation-derivation-a" title="Link to this equation">#</a></span>\[\begin{split} \begin{align*}
    a_x &amp;= \|\vec{a}\| \cos(\phi), \\
    a_y &amp;= \|\vec{a}\| \sin(\phi).
\end{align*} \end{split}\]</div>
<p class="sd-card-text">Using the same method for the vector <span class="math notranslate nohighlight">\(\vec{b}\)</span> we have</p>
<div class="math notranslate nohighlight" id="equation-rotation-derivation-b">
<span class="eqno">(12)<a class="headerlink" href="#equation-rotation-derivation-b" title="Link to this equation">#</a></span>\[\begin{split} \begin{align*}
    b_x &amp;= \|\vec{a}\| \cos(\phi + \theta), \\
    b_y &amp;= \|\vec{a}\| \sin(\phi + \theta).
\end{align*} \end{split}\]</div>
<p class="sd-card-text">We can rewrite <span class="math notranslate nohighlight">\(\cos(\phi+\theta)\)</span> and <span class="math notranslate nohighlight">\(\sin(\phi+\theta)\)</span> using <a href="https://en.wikipedia.org/wiki/List_of_trigonometric_identities#" target="_blank">trigonometric identities</a></p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
    \cos(\phi + \theta) &amp;= \cos(\phi) \cos(\theta) - \sin(\phi) \sin(\theta), \\
    \sin(\phi + \theta) &amp;= \sin(\phi) \cos(\theta) + \cos(\phi) \sin(\theta),
\end{align*}\end{split}\]</div>
<p class="sd-card-text">so equation <a class="reference internal" href="#equation-rotation-derivation-b">(12)</a> is</p>
<div class="math notranslate nohighlight" id="equation-rotation-derivation-b-2">
<span class="eqno">(13)<a class="headerlink" href="#equation-rotation-derivation-b-2" title="Link to this equation">#</a></span>\[\begin{split} \begin{align*}
    b_x &amp;= \|\vec{a}\| \cos(\phi) \cos(\theta) - \|\vec{a}\| \sin(\phi) \sin(\theta), \\
    b_y &amp;= \|\vec{a}\| \sin(\phi) \cos(\theta) + \|\vec{a}\| \cos(\phi) \sin(\theta).
\end{align*} \end{split}\]</div>
<p class="sd-card-text">Substituting equation <a class="reference internal" href="#equation-rotation-derivation-a">(11)</a> into equation <a class="reference internal" href="#equation-rotation-derivation-b-2">(13)</a> gives</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
    b_x &amp;= a_x \cos(\theta) - a_y \sin(\theta), \\
    b_y &amp;= a_y \sin(\phi) + a_x \sin(\theta),
\end{align*}\end{split}\]</div>
<p class="sd-card-text">which can be written using matrices as</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
    \begin{pmatrix} b_x \\ b_y \end{pmatrix} =
    \begin{pmatrix} \cos(\theta) &amp; -\sin(\theta) \\ \sin(\theta) &amp; \cos(\theta) \end{pmatrix}
    \begin{pmatrix} a_x \\ a_y \end{pmatrix},
\end{align*}\end{split}\]</div>
<p class="sd-card-text">so the transformation (non-transposed) matrix for rotating around the <span class="math notranslate nohighlight">\(z\)</span>-axis in 2D is</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{pmatrix} \cos(\theta) &amp; -\sin(\theta) \\ \sin(\theta) &amp; \cos(\theta) \end{pmatrix}.\end{split}\]</div>
<p class="sd-card-text">We need a <span class="math notranslate nohighlight">\(4\times 4\)</span> matrix to represent 3D rotation around the <span class="math notranslate nohighlight">\(z\)</span>-axis, so we replace the 3rd and 4th row and columns with the 3rd and 4th row and column from the <span class="math notranslate nohighlight">\(4\times 4\)</span> identity matrix giving</p>
<div class="math notranslate nohighlight">
\[\begin{split}R_z = \begin{pmatrix}
    \cos(\theta) &amp; -\sin(\theta) &amp; 0 &amp; 0 \\
    \sin(\theta) &amp; \cos(\theta) &amp; 0 &amp; 0 \\
    0 &amp; 0 &amp; 1 &amp; 0 \\
    0 &amp; 0 &amp; 0 &amp; 1
\end{pmatrix}.\end{split}\]</div>
<p class="sd-card-text">The rotation matrices for the rotation around the <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(y\)</span> axes are derived using a similar process.</p>
</div>
</details><p>Let’s rotate our original rectangle anti-clockwise about the <span class="math notranslate nohighlight">\(z\)</span>-axis by <span class="math notranslate nohighlight">\(\theta = 45^\circ\)</span>. The transposed rotation matrix to do this is</p>
<div class="math notranslate nohighlight">
\[\begin{split}Rotate =
\begin{pmatrix}
     \cos(45^\circ) &amp; \sin(45^\circ) &amp; 0 &amp; 0 \\
    -\sin(45^\circ) &amp; \cos(45^\circ) &amp; 0 &amp; 0 \\
    0 &amp; 0 &amp; 1 &amp; 0 \\
    0 &amp; 0 &amp; 0 &amp; 1
\end{pmatrix}.\end{split}\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Angles in JavaScript are always expressed in radians, so we need to use the following to convert from degrees to radians</p>
<div class="math notranslate nohighlight">
\[radians = degrees \times \frac{\pi}{180}\]</div>
</div>
<div class="tip admonition">
<p class="admonition-title">Task</p>
<p>Enter the following function definition to the matrix class.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rotateZ</span><span class="p">(</span><span class="nx">rad</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">rad</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">rad</span><span class="p">);</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Mat4</span><span class="p">().</span><span class="nx">set</span><span class="p">(</span>
<span class="w">    </span><span class="nx">c</span><span class="p">,</span><span class="w">  </span><span class="nx">s</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="o">-</span><span class="nx">s</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w">  </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="mf">0</span><span class="p">,</span><span class="w">  </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Add the following to the <em><strong>transformations.js</strong></em> file after we calculate the scaling matrix</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">angle</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mf">45</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">180</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">rotate</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Mat4</span><span class="p">().</span><span class="nx">rotateZ</span><span class="p">(</span><span class="nx">angle</span><span class="p">);</span>
</pre></div>
</div>
<p>And change the model matrix to the following.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">rotate</span><span class="p">;</span>
</pre></div>
</div>
</div>
<p>Here we defined a function to the matrix class to calculate the rotation matrix. Refresh your web browser, and you should see that our rectangle has been rotated <span class="math notranslate nohighlight">\(45^\circ\)</span> degrees in the anti-clockwise direction as shown in <a class="reference internal" href="#rotation-rectangle-figure"><span class="std std-numref">Fig. 36</span></a>.</p>
<figure class="align-default" id="rotation-rectangle-figure">
<a class="reference internal image-reference" href="../_images/04_rotation.png"><img alt="../_images/04_rotation.png" src="../_images/04_rotation.png" style="width: 80%;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 36 </span><span class="caption-text">Rectangle rotated anti-clockwise about the <span class="math notranslate nohighlight">\(z\)</span>-axis by <span class="math notranslate nohighlight">\(45^\circ\)</span>.</span><a class="headerlink" href="#rotation-rectangle-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<hr class="docutils" />
<section id="axis-angle-rotation">
<span id="axis-angle-rotation-section"></span><h3>Axis-angle rotation<a class="headerlink" href="#axis-angle-rotation" title="Link to this heading">#</a></h3>
<p>The three rotation transformations are only useful if we want to only rotate around one of the three coordinate axes. A more useful transformation is the rotation around the axis that points in the direction of a unit vector <span class="math notranslate nohighlight">\(\hat{v}\)</span> which has its tail at <span class="math notranslate nohighlight">\((0,0,0)\)</span> (<a class="reference internal" href="#axis-angle-rotation-figure"><span class="std std-numref">Fig. 37</span></a>).</p>
<figure class="align-default" id="axis-angle-rotation-figure">
<a class="reference internal image-reference" href="../_images/04_axis_angle_rotation.svg"><img alt="../_images/04_axis_angle_rotation.svg" src="../_images/04_axis_angle_rotation.svg" style="height: 300px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 37 </span><span class="caption-text">Axis-angle rotation.</span><a class="headerlink" href="#axis-angle-rotation-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>The transposed transformation matrix for rotation around a unit vector <span class="math notranslate nohighlight">\(\hat{v} = (v_x, v_y, v_z)\)</span>, anti-clockwise by angle <span class="math notranslate nohighlight">\(\theta\)</span> when looking down the vector is.</p>
<div class="math notranslate nohighlight" id="equation-eq-axis-angle-rotation-matrix">
<span class="eqno">(14)<a class="headerlink" href="#equation-eq-axis-angle-rotation-matrix" title="Link to this equation">#</a></span>\[\begin{split} \begin{align*}
    Rotate =
    \begin{pmatrix}
        (1 - c) v_x^2  + c &amp;
        (1 - c) v_x v_y + v_zs &amp;
        (1 - c) v_x v_z - v_ys &amp;
        0 \\
        (1 - c) v_x v_y - v_zs &amp;
        (1 - c) v_y^2 + c &amp;
        (1 - c) v_y v_z + v_xs &amp;
        0 \\
        (1 - c) v_x v_z + v_ys &amp;
        (1 - c) v_y v_z - v_xs &amp;
        (1 - c) v_z^2 + c &amp;
        0 \\
        0 &amp; 0 &amp; 0 &amp; 1
    \end{pmatrix}.
\end{align*} \end{split}\]</div>
<p>Where <span class="math notranslate nohighlight">\(c = \cos(\theta)\)</span> and <span class="math notranslate nohighlight">\(s = \sin(\theta)\)</span>. Again, you don’t really need to know how this is derived but if you are curious click on the dropdown link below.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Derivation of the axis-angle rotation matrix (click to show)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">The rotation about the unit vector <span class="math notranslate nohighlight">\(\hat{v} = (v_x, v_y, v_z)\)</span> by angle <span class="math notranslate nohighlight">\(\theta\)</span> is the <a class="reference internal" href="#composite-transformations-section"><span class="std std-ref">composition</span></a> of 5 separate rotations:</p>
<ol class="arabic simple">
<li><p class="sd-card-text">Rotate <span class="math notranslate nohighlight">\(\hat{v}\)</span> around the <span class="math notranslate nohighlight">\(x\)</span>-axis so that it is in the <span class="math notranslate nohighlight">\(xz\)</span>-plane (the <span class="math notranslate nohighlight">\(y\)</span> component of the vector is 0);</p></li>
<li><p class="sd-card-text">Rotate the vector around the <span class="math notranslate nohighlight">\(y\)</span>-axis so that it points along the <span class="math notranslate nohighlight">\(z\)</span>-axis (the <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(y\)</span> components are 0 and the <span class="math notranslate nohighlight">\(z\)</span> component is a positive number);</p></li>
<li><p class="sd-card-text">Perform the rotation around the <span class="math notranslate nohighlight">\(z\)</span>-axis;</p></li>
<li><p class="sd-card-text">Reverse the rotation around the <span class="math notranslate nohighlight">\(y\)</span>-axis;</p></li>
<li><p class="sd-card-text">Reverse the rotation around the <span class="math notranslate nohighlight">\(x\)</span>-axis.</p></li>
</ol>
<hr class="docutils" />
<ol class="arabic simple">
<li><p class="sd-card-text">The rotation around the <span class="math notranslate nohighlight">\(x\)</span>-axis is achieved by forming a right-angled triangle in the <span class="math notranslate nohighlight">\(yz\)</span>-plane where the angle of rotation <span class="math notranslate nohighlight">\(\theta\)</span> has an adjacent side of length <span class="math notranslate nohighlight">\(v_z\)</span>, an opposite side of length <span class="math notranslate nohighlight">\(v_y\)</span> and a hypotenuse of length <span class="math notranslate nohighlight">\(\sqrt{v_y^2 + v_z^2}\)</span> (<a class="reference internal" href="#axis-angle-rotation1-figure"><span class="std std-numref">Fig. 38</span></a>).</p></li>
</ol>
<figure class="align-default" id="axis-angle-rotation1-figure">
<a class="reference internal image-reference" href="../_images/04_axis_angle_rotation_1.svg"><img alt="../_images/04_axis_angle_rotation_1.svg" src="../_images/04_axis_angle_rotation_1.svg" style="height: 250px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 38 </span><span class="caption-text">Rotate <span class="math notranslate nohighlight">\(\vec{v}\)</span> around the <span class="math notranslate nohighlight">\(x\)</span>-axis</span><a class="headerlink" href="#axis-angle-rotation1-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p class="sd-card-text">Therefore, <span class="math notranslate nohighlight">\(\cos(\theta) = \dfrac{v_z}{\sqrt{v_y^2 + v_z^2}}\)</span> and <span class="math notranslate nohighlight">\(\sin(\theta) = \dfrac{v_y}{\sqrt{v_y^2 + v_z^2}}\)</span> so the rotation matrix is</p>
<div class="math notranslate nohighlight">
\[\begin{split}R_1 =
\begin{pmatrix}
    1 &amp; 0 &amp; 0 &amp; 0 \\
    0 &amp; \dfrac{v_z}{\sqrt{v_y^2 + v_z^2}} &amp; -\dfrac{v_x}{\sqrt{v_y^2 + v_z^2}} &amp; 0 \\
    0 &amp; \dfrac{v_y}{\sqrt{v_y^2 + v_z^2}} &amp;  \dfrac{v_z}{\sqrt{v_y^2 + v_z^2}} &amp; 0 \\
    0 &amp; 0 &amp; 0 &amp; 1
\end{pmatrix}.\end{split}\]</div>
<hr class="docutils" />
<ol class="arabic simple" start="2">
<li><p class="sd-card-text">The rotation around the <span class="math notranslate nohighlight">\(y\)</span>-axis is achieved by forming another right-angled triangle in the <span class="math notranslate nohighlight">\(xz\)</span>-plane where <span class="math notranslate nohighlight">\(\theta\)</span> has an adjacent side of length <span class="math notranslate nohighlight">\(\sqrt{v_y^2 + v_z^2}\)</span>, an opposite side of length <span class="math notranslate nohighlight">\(v_x\)</span> and a hypotenuse of length 1 since <span class="math notranslate nohighlight">\(\hat{v}\)</span> is a unit vector (<a class="reference internal" href="#axis-angle-rotation2-figure"><span class="std std-numref">Fig. 39</span></a>).</p></li>
</ol>
<figure class="align-default" id="axis-angle-rotation2-figure">
<a class="reference internal image-reference" href="../_images/04_axis_angle_rotation_2.svg"><img alt="../_images/04_axis_angle_rotation_2.svg" src="../_images/04_axis_angle_rotation_2.svg" style="height: 250px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 39 </span><span class="caption-text">Rotate around the <span class="math notranslate nohighlight">\(y\)</span>-axis</span><a class="headerlink" href="#axis-angle-rotation2-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p class="sd-card-text">Therefore, <span class="math notranslate nohighlight">\(\cos(\theta) = \sqrt{v_y^2 + v_z^2}\)</span> and <span class="math notranslate nohighlight">\(\sin(\theta) = v_x\)</span>. Note that here we are rotating in the clockwise direction so the rotation matrix is</p>
<div class="math notranslate nohighlight">
\[\begin{split}R_2 = \begin{pmatrix}
    \sqrt{v_y^2 + v_z^2} &amp; 0 &amp; -v_x &amp; 0 \\
    0 &amp; 1 &amp; 0 &amp; 0 \\
    v_x &amp; 0 &amp; \sqrt{v_y^2 + v_z^2} &amp; 0 \\
    0 &amp; 0 &amp; 0 &amp; 1
\end{pmatrix}.\end{split}\]</div>
<hr class="docutils" />
<ol class="arabic simple" start="3">
<li><p class="sd-card-text">Now that the vector points along the <span class="math notranslate nohighlight">\(z\)</span>-axis we perform the rotation so the rotation matrix for this is</p></li>
</ol>
<div class="math notranslate nohighlight">
\[\begin{split}R_3 = \begin{pmatrix}
    \cos(\theta) &amp; -\sin(\theta) &amp; 0 &amp; 0 \\
    \sin(\theta) &amp;  \cos(\theta) &amp; 0 &amp; 0 \\
    0 &amp; 0 &amp; 1 &amp; 0 \\
    0 &amp; 0 &amp; 0 &amp; 1
\end{pmatrix}.\end{split}\]</div>
<hr class="docutils" />
<ol class="arabic simple" start="4">
<li><p class="sd-card-text">The reverse rotation around the <span class="math notranslate nohighlight">\(y\)</span> is simply the rotation matrix <span class="math notranslate nohighlight">\(R_2\)</span> with the negative sign for <span class="math notranslate nohighlight">\(\sin(\theta)\)</span> swapped</p></li>
</ol>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
    R_4 &amp;= \begin{pmatrix}
       \sqrt{v_y^2 + v_z^2} &amp; 0 &amp; v_x &amp; 0 \\
       0 &amp; 1 &amp; 0 &amp; 0 \\
       -v_x &amp; 0 &amp; \sqrt{v_y^2 + v_z^2} &amp; 0 \\
       0 &amp; 0 &amp; 0 &amp; 1
   \end{pmatrix}.
\end{align*}\end{split}\]</div>
<hr class="docutils" />
<ol class="arabic simple" start="5">
<li><p class="sd-card-text">The reverse rotation around the <span class="math notranslate nohighlight">\(x\)</span> is simply the rotation matrix <span class="math notranslate nohighlight">\(R_1\)</span> with the negative sign for <span class="math notranslate nohighlight">\(\sin(\theta)\)</span> swapped</p></li>
</ol>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
   R_5 &amp;= \begin{pmatrix}
       1 &amp; 0 &amp; 0 &amp; 0 \\
       0 &amp;  \dfrac{v_z}{\sqrt{v_y^2 + v_z^2}} &amp; \dfrac{v_y}{\sqrt{v_y^2 + v_z^2}} &amp; 0 \\
       0 &amp; -\dfrac{v_x}{\sqrt{v_y^2 + v_z^2}} &amp; \dfrac{v_z}{\sqrt{v_y^2 + v_z^2}} &amp; 0 \\
       0 &amp; 0 &amp; 0 &amp; 1
   \end{pmatrix}.
\end{align*}\end{split}\]</div>
<hr class="docutils" />
<p class="sd-card-text">Multiplying all the separate matrices together gives</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
    Rotate &amp;= R_5 \cdot R_4 \cdot R_3 \cdot R_2 \cdot R_1 \\
    &amp;=
    \begin{pmatrix}
        \dfrac{v_x^2 + (v_y^2 + v_z^2)c}{\|\vec{v}\|^2} &amp;
        \dfrac{v_xv_y(1 - c)}{\|\vec{v}\|^2} + \dfrac{v_zs}{\|\vec{v}\|} &amp;
        \dfrac{v_xv_z(1 - c)}{\|\vec{v}\|^2} - \dfrac{v_ys}{\|\vec{v}\|} &amp;
        0 \\
        \dfrac{v_xv_y(1 - c)}{\|\vec{v}\|^2} - \dfrac{v_zs}{\|\vec{v}\|} &amp;
        \dfrac{v_y^2 + (v_x^2 + v_y^2)c}{\|\vec{v}\|^2} &amp;
        \dfrac{v_yv_z(1 - c)}{\|\vec{v}\|^2} - \dfrac{v_xs}{\|\vec{v}\|} &amp;
        0 \\
        \dfrac{v_xv_z(1 - c)}{\|\vec{v}\|^2} + \dfrac{v_ys}{\|\vec{v}\|} &amp;
        \dfrac{v_yv_z(1 - c)}{\|\vec{v}\|^2} - \dfrac{v_xs}{\|\vec{v}\|} &amp;
        \dfrac{v_z^2 + (v_x^2 + v_y^2)c}{\|\vec{v}\|^2} &amp;
        0 \\
        0 &amp; 0 &amp; 0 &amp; 1
    \end{pmatrix}.
\end{align*}\end{split}\]</div>
<p class="sd-card-text">Where <span class="math notranslate nohighlight">\(c = \cos(\theta)\)</span> and <span class="math notranslate nohighlight">\(s = \sin(\theta)\)</span>. Substituting <span class="math notranslate nohighlight">\(v_y^2 + v_z^2 = 1 - v_x^2\)</span> and the matrix simplifies to</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
    Rotate &amp;= R_1 \cdot R_2 \cdot R_3 \cdot R_4 \cdot R_5 \\
    &amp;=
    \begin{pmatrix}
        (1 - c) v_x^2 + c &amp;
        (1 - c) v_x v_y - v_zs &amp;
        (1 - c) v_x v_z + v_ys &amp; 0 \\
        (1 - c) v_x v_y + v_zs &amp;
        (1 - c) v_y^2 + c &amp;
        (1 - c) v_y v_z - v_xs &amp; 0 \\
        (1 - c) v_x v_z - v_ys &amp;
        (1 - c) v_y v_z + v_xs &amp;
        (1 - c) v_z^2 + c &amp; 0 \\
        0 &amp; 0 &amp; 0 &amp; 1
    \end{pmatrix}.
\end{align*}\end{split}\]</div>
<p class="sd-card-text">Note that this matrix is transposed when we code it into JavaScript.</p>
</div>
</details><p>The rotations around the three coordinates axis can be calculated using the axis-angle rotation matrix (by letting <span class="math notranslate nohighlight">\(\hat{v}\)</span> be <span class="math notranslate nohighlight">\((1,0,0)\)</span>, <span class="math notranslate nohighlight">\((0,1,0)\)</span> or <span class="math notranslate nohighlight">\((0,0,1)\)</span> for rotating around the <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span> and <span class="math notranslate nohighlight">\(z\)</span> axes respectively) so we can edit our <code class="docutils literal notranslate"><span class="pre">rotate()</span></code> function so that it uses equation <a class="reference internal" href="#equation-eq-axis-angle-rotation-matrix">(14)</a>.</p>
<div class="tip admonition">
<p class="admonition-title">Task</p>
<p>Edit the <code class="docutils literal notranslate"><span class="pre">rotate()</span></code> function in the <em><strong>maths.js</strong></em> file so that it looks like the following.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rotate</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">,</span><span class="w"> </span><span class="nx">z</span><span class="p">,</span><span class="w"> </span><span class="nx">rad</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">z</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">z</span><span class="p">);</span>
<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">len</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="nx">x</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="nx">len</span><span class="p">;</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="nx">len</span><span class="p">;</span><span class="w"> </span><span class="nx">z</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="nx">len</span><span class="p">;</span>
<span class="w"> </span><span class="p">}</span>
<span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">rad</span><span class="p">);</span>
<span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">rad</span><span class="p">);</span>
<span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">c</span><span class="p">;</span>

<span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Mat4</span><span class="p">().</span><span class="nx">set</span><span class="p">(</span>
<span class="w">   </span><span class="nx">t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">c</span><span class="p">,</span><span class="w">      </span><span class="nx">t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">z</span><span class="p">,</span><span class="w">  </span><span class="nx">t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">z</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">y</span><span class="p">,</span><span class="w">  </span><span class="mf">0</span><span class="p">,</span>
<span class="w">   </span><span class="nx">t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">z</span><span class="p">,</span><span class="w">  </span><span class="nx">t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">c</span><span class="p">,</span><span class="w">      </span><span class="nx">t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">z</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">x</span><span class="p">,</span><span class="w">  </span><span class="mf">0</span><span class="p">,</span>
<span class="w">   </span><span class="nx">t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">z</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">y</span><span class="p">,</span><span class="w">  </span><span class="nx">t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">z</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">x</span><span class="p">,</span><span class="w">  </span><span class="nx">t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">z</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">z</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">c</span><span class="p">,</span><span class="w">      </span><span class="mf">0</span><span class="p">,</span>
<span class="w">   </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span>
<span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And change the calculation of the rotation matrix to the following</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">rotate</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Mat4</span><span class="p">().</span><span class="nx">rotate</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">angle</span><span class="p">);</span>
</pre></div>
</div>
</div>
<p>Here we have changed our function for calculating the rotation matrix so that it uses axis-angle rotation and have used it to rotate the rectangle by <span class="math notranslate nohighlight">\(45^\circ\)</span> anti-clockwise about a vector pointing along the <span class="math notranslate nohighlight">\(z\)</span>-axis (i.e., straight out of the screen towards you). Refreshing your browser, and you should see that the output doesn’t change (<a class="reference internal" href="#rotation-rectangle-figure"><span class="std std-numref">Fig. 36</span></a>).</p>
<hr class="docutils" />
</section>
</section>
<section id="composite-transformations">
<span id="composite-transformations-section"></span><h2>Composite transformations<a class="headerlink" href="#composite-transformations" title="Link to this heading">#</a></h2>
<p>So far we have performed translation, scaling and rotation transformations on our rectangle separately. What if we wanted to combine these transformations so that we can control the size, rotation and position of the rectangle? If we apply the transformations in the order <strong>scale</strong>, <strong>rotate</strong>, <strong>translate</strong> then applying the scaling we have</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
    \begin{pmatrix} x' \\ y' \\ z' \\ 1 \end{pmatrix}
    &amp;=
    Scale \cdot \begin{pmatrix} x \\ y \\ z \\ 1 \end{pmatrix}.
\end{align*}\end{split}\]</div>
<p>Next applying rotation to the scaled coordinates we have</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
    \begin{pmatrix} x' \\ y' \\ z' \\ 1 \end{pmatrix} &amp;=
    Rotate \cdot Scale \cdot \begin{pmatrix} x \\ y \\ z \\ 1 \end{pmatrix}.
\end{align*}\end{split}\]</div>
<p>Finally, applying translation to the scaled and rotated coordinates we have</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
    \begin{pmatrix} x' \\ y' \\ z' \\ 1 \end{pmatrix}
    &amp;=
    Translate \cdot Rotate \cdot Scale \cdot \begin{pmatrix} x \\ y \\ z \\ 1 \end{pmatrix}.
\end{align*}\end{split}\]</div>
<p><span class="math notranslate nohighlight">\(Translate \cdot Rotate \cdot Scale\)</span> is a single <span class="math notranslate nohighlight">\(4 \times 4\)</span> transformation matrix that combines the three transformations known as the <strong>model matrix</strong>. Note the order that the translations are applied to the coordinates is read from right to left.</p>
<p>Let’s apply scaling, rotation and translation (in that order) to our rectangle. Since we have already calculated the separate transformation matrices all we need to do is to multiply them together when calculating the model matrix.</p>
<div class="tip admonition">
<p class="admonition-title">Task</p>
<p>Change the model matrix to the following.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">translate</span><span class="p">.</span><span class="nx">multiply</span><span class="p">(</span><span class="nx">rotate</span><span class="p">).</span><span class="nx">multiply</span><span class="p">(</span><span class="nx">scale</span><span class="p">);</span>
</pre></div>
</div>
</div>
<p>Refresh your web browser, and you should see that the rectangle has been scaled down, rotated anti-clockwise and then translated as shown in <a class="reference internal" href="#composite-transformation-figure"><span class="std std-numref">Fig. 40</span></a>.</p>
<figure class="align-default" id="composite-transformation-figure">
<a class="reference internal image-reference" href="../_images/04_composite_transformation.png"><img alt="../_images/04_composite_transformation.png" src="../_images/04_composite_transformation.png" style="width: 80%;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 40 </span><span class="caption-text">Scaling, rotation and translation applied to the textured rectangle.</span><a class="headerlink" href="#composite-transformation-figure" title="Link to this image">#</a></p>
</figcaption>
</figure>
<hr class="docutils" />
</section>
<section id="animation">
<span id="animating-objects-section"></span><h2>Animation<a class="headerlink" href="#animation" title="Link to this heading">#</a></h2>
<p>We are now going to introduce animation to our WebGL application so that we can better see the effects of animations. Animation is done by redrawing the scene while updating values that represent motion or change, such as the position and size of an object. In WebGL this is done using the brower’s built-in <code class="docutils literal notranslate"><span class="pre">requestAnimationFrame()</span></code> function which schedules the rendering function to run before the next screen refresh (typically 60 times per second).</p>
<p>Our <code class="docutils literal notranslate"><span class="pre">render()</span></code> function is used to update the animation state and draw the frame. The callback recieves a timestamp that is the time in milliseconds since the rendering of the last frame which is useful for controlling movement speed. So what is happening is that whilst the rectangle may look like a static image, it is continously being redrawn every 60th of a second.</p>
<p>Let rotate our rectangle about its centre.</p>
<div class="tip admonition">
<p class="admonition-title">Task</p>
<p>Change the <code class="docutils literal notranslate"><span class="pre">render()</span></code> function declaration so that it takes in an input of the time since the application was started.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">render</span><span class="p">(</span><span class="nx">time</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</pre></div>
</div>
<p>Then change the command used to calculate the rotation matrix to the following.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">angle</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="o">/</span><span class="mf">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">time</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.001</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">rotate</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Mat4</span><span class="p">().</span><span class="nx">rotate</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">angle</span><span class="p">);</span>
</pre></div>
</div>
</div>
<p>Here we calculate the rotation angle so that the rectangle will complete one full rotation every 2 seconds. Note that <code class="docutils literal notranslate"><span class="pre">time</span></code> is the time in milliseconds since the application was started hence we multiply the number of radians in a circle, <span class="math notranslate nohighlight">\(2\pi\)</span>, by 0.001.</p>
<p>Refresh your browser, and you should see something similar to below.</p>
<center>
<video controls muted="true" loop="true" width="80%">
    <source src="../_static/videos/04_transformations_1.mp4" type="video/mp4">
</video>
</center>
<p>When calculating the composite transformation matrix the order in which we multiply the individual transformations will determine the effects of the composite transformation. To see this lets translate the rectangle first before rotating it.</p>
<div class="tip admonition">
<p class="admonition-title">Task</p>
<p>Change the calculation of the model matrix so that it looks like the following.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">rotate</span><span class="p">.</span><span class="nx">multiply</span><span class="p">(</span><span class="nx">translate</span><span class="p">).</span><span class="nx">multiply</span><span class="p">(</span><span class="nx">scale</span><span class="p">);</span>
</pre></div>
</div>
</div>
<p>Here we have changed the order which the transformation matrices for translation and rotation are switched, i.e.,</p>
<div class="math notranslate nohighlight">
\[Model = Rotate \cdot Translate \cdot Scale,\]</div>
<p>which has the effect of moving the rectangle so that it is centred at coordinates <span class="math notranslate nohighlight">\((0.4, 0.3, 0)\)</span> and then rotated about <span class="math notranslate nohighlight">\((0, 0, 0)\)</span>. Refresh your browser and you should see something similar to below.</p>
<center>
<video controls muted="true" loop="true" width="80%">
    <source src="../_static/videos/04_transformations_2.mp4" type="video/mp4">
</video>
</center>
</section>
<hr class="docutils" />
<section id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Scale the original rectangle so that it is a quarter of the original size and apply translation so that the rectangle moves anti-clockwise around a circle centred at the window centre with radius 0.5 and completes one full rotation every 5 seconds. Hint: the coordinates of points on a circle centered at <span class="math notranslate nohighlight">\((0,0)\)</span> with radius <span class="math notranslate nohighlight">\(r\)</span> can be calculated using <span class="math notranslate nohighlight">\(x = r\cos(t)\)</span> and <span class="math notranslate nohighlight">\(y = r\sin(t)\)</span> where <span class="math notranslate nohighlight">\(t\)</span> is some number.</p></li>
</ol>
<center>
<video controls muted="true" loop="true" width="400">
    <source src="../_static/videos/04_Ex1.mp4" type="video/mp4">
</video>
</center>
<ol class="arabic simple" start="2">
<li><p>Rotate your rectangle from exercise 1 in a clockwise rotation about its centre at twice the rotation speed used in exercise 1.</p></li>
</ol>
<center>
<video controls muted="true" loop="true" width="400">
    <source src="../_static/videos/04_Ex2.mp4" type="video/mp4">
</video>
</center>
<ol class="arabic simple" start="3">
<li><p>Scale your rectangle from exercise 2 so that it grows and shrinks about its centre. Hint: The <span class="math notranslate nohighlight">\(\sin(t)\)</span> function oscillates between 0 and 1 as <span class="math notranslate nohighlight">\(t\)</span> increases.</p></li>
</ol>
<center>
<video controls muted="true" loop="true" width="400">
    <source src="../_static/videos/04_Ex3.mp4" type="video/mp4">
</video>
</center>
<ol class="arabic simple" start="4">
<li><p>Transform the rectangle so that it moves around the canvas and bounces off the borders.</p></li>
</ol>
<center>
<video controls muted="true" loop="true" width="400">
    <source src="../_static/videos/04_Ex4.mp4" type="video/mp4">
</video>
</center></section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./_pages"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="04_Vectors_and_matrices.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Lab 4: Vectors and Matrices</p>
      </div>
    </a>
    <a class="right-next"
       href="06_3D_worlds.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Lab 6: 3D Worlds</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#webgl-coordinate-system">WebGL coordinate system</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#translation">Translation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scaling">Scaling</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rotation">Rotation</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#axis-angle-rotation">Axis-angle rotation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#composite-transformations">Composite transformations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#animation">Animation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercises">Exercises</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Dr Jon Shiach
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2026.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>